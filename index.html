<!DOCTYPE html>
<html lang="fa" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>تبدیل عکس به ایموجی - دقت بالا</title>
    <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.4.0/css/all.min.css">
    <style>
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
        }
        .glass-effect {
            backdrop-filter: blur(10px);
            background: rgba(255, 255, 255, 0.1);
            border: 1px solid rgba(255, 255, 255, 0.2);
        }
        .emoji-output {
            font-family: 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji', sans-serif;
            line-height: 1;
            letter-spacing: 0;
            word-spacing: 0;
            white-space: pre-wrap;
            overflow-wrap: break-word;
        }
        .drag-drop-area {
            border: 2px dashed #d1d5db;
            border-radius: 10px;
            transition: all 0.3s ease;
        }
        .drag-drop-area:hover {
            border-color: #3b82f6;
            background-color: rgba(59, 130, 246, 0.1);
        }
        .drag-drop-area.dragover {
            border-color: #10b981;
            background-color: rgba(16, 185, 129, 0.1);
        }
        .progress-bar {
            transition: width 0.3s ease;
        }
        .control-panel {
            background: rgba(255, 255, 255, 0.95);
            border-radius: 15px;
            padding: 20px;
            margin: 10px 0;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1);
        }
        .emoji-preview {
            max-height: 70vh;
            overflow: auto;
            border: 2px solid #e5e7eb;
            border-radius: 10px;
            padding: 10px;
            background: white;
            font-size: 12px;
        }
        .slider-container {
            margin: 15px 0;
        }
        .slider-label {
            font-weight: 600;
            color: #374151;
            margin-bottom: 5px;
        }
        .custom-slider {
            width: 100%;
            height: 6px;
            border-radius: 3px;
            background: #e5e7eb;
            outline: none;
            -webkit-appearance: none;
        }
        .custom-slider::-webkit-slider-thumb {
            -webkit-appearance: none;
            appearance: none;
            width: 20px;
            height: 20px;
            border-radius: 50%;
            background: #3b82f6;
            cursor: pointer;
            box-shadow: 0 2px 8px rgba(59, 130, 246, 0.3);
        }
        .custom-slider::-moz-range-thumb {
            width: 20px;
            height: 20px;
            border-radius: 50%;
            background: #3b82f6;
            cursor: pointer;
            border: none;
            box-shadow: 0 2px 8px rgba(59, 130, 246, 0.3);
        }
        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(120px, 1fr));
            gap: 15px;
            margin: 20px 0;
        }
        .stat-card {
            background: white;
            padding: 15px;
            border-radius: 10px;
            text-align: center;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
        }
        .stat-value {
            font-size: 24px;
            font-weight: bold;
            color: #3b82f6;
        }
        .stat-label {
            font-size: 12px;
            color: #6b7280;
            margin-top: 5px;
        }
    </style>
</head>
<body class="min-h-screen p-4">
    <div class="max-w-6xl mx-auto">
        <!-- Header -->
        <div class="text-center mb-8">
            <h1 class="text-4xl font-bold text-white mb-2">
                <i class="fas fa-image mr-3"></i>
                تبدیل عکس به ایموجی
            </h1>
            <p class="text-white opacity-90">با دقت فوق‌العاده بالا و حفظ جزئیات</p>
        </div>

        <!-- Main Container -->
        <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
            <!-- Left Panel - Controls -->
            <div class="space-y-4">
                <!-- Upload Area -->
                <div class="control-panel">
                    <h3 class="text-lg font-semibold mb-4 flex items-center">
                        <i class="fas fa-cloud-upload-alt mr-2 text-blue-500"></i>
                        آپلود عکس
                    </h3>
                    <div class="drag-drop-area p-8 text-center cursor-pointer" onclick="document.getElementById('imageInput').click()">
                        <i class="fas fa-cloud-upload-alt text-4xl text-gray-400 mb-4"></i>
                        <p class="text-gray-600 mb-2">فایل را اینجا رها کنید یا کلیک کنید</p>
                        <p class="text-sm text-gray-500">JPG, PNG, GIF تا 10MB</p>
                        <input type="file" id="imageInput" accept="image/*" class="hidden">
                    </div>
                </div>

                <!-- Settings Panel -->
                <div class="control-panel">
                    <h3 class="text-lg font-semibold mb-4 flex items-center">
                        <i class="fas fa-cog mr-2 text-green-500"></i>
                        تنظیمات دقت
                    </h3>
                    
                    <div class="slider-container">
                        <div class="slider-label">رزولوشن خروجی: <span id="resolutionValue">50</span> پیکسل</div>
                        <input type="range" id="resolutionSlider" min="20" max="150" value="50" class="custom-slider">
                    </div>

                    <div class="slider-container">
                        <div class="slider-label">حساسیت رنگ: <span id="colorSensitivityValue">80</span>%</div>
                        <input type="range" id="colorSensitivitySlider" min="50" max="100" value="80" class="custom-slider">
                    </div>

                    <div class="slider-container">
                        <div class="slider-label">سایز ایموجی: <span id="emojiSizeValue">16</span>px</div>
                        <input type="range" id="emojiSizeSlider" min="8" max="24" value="16" class="custom-slider">
                    </div>

                    <div class="slider-container">
                        <div class="slider-label">کنتراست: <span id="contrastValue">100</span>%</div>
                        <input type="range" id="contrastSlider" min="50" max="200" value="100" class="custom-slider">
                    </div>

                    <div class="flex items-center justify-between mt-4">
                        <label class="flex items-center">
                            <input type="checkbox" id="ditherCheck" class="mr-2">
                            <span>فعال‌سازی Dithering</span>
                        </label>
                        <label class="flex items-center">
                            <input type="checkbox" id="preserveAspectCheck" checked class="mr-2">
                            <span>حفظ نسبت ابعاد</span>
                        </label>
                    </div>
                </div>

                <!-- Process Button -->
                <div class="control-panel">
                    <button id="processBtn" class="w-full bg-blue-500 hover:bg-blue-600 text-white font-semibold py-3 px-6 rounded-lg transition-colors duration-200 flex items-center justify-center">
                        <i class="fas fa-magic mr-2"></i>
                        شروع تبدیل
                    </button>
                    <div id="progressContainer" class="mt-4 hidden">
                        <div class="flex justify-between text-sm text-gray-600 mb-2">
                            <span>پیشرفت:</span>
                            <span id="progressText">0%</span>
                        </div>
                        <div class="w-full bg-gray-200 rounded-full h-2">
                            <div id="progressBar" class="bg-blue-500 h-2 rounded-full progress-bar" style="width: 0%"></div>
                        </div>
                    </div>
                </div>

                <!-- Stats -->
                <div class="control-panel">
                    <h3 class="text-lg font-semibold mb-4 flex items-center">
                        <i class="fas fa-chart-bar mr-2 text-purple-500"></i>
                        آمار پردازش
                    </h3>
                    <div class="stats-grid">
                        <div class="stat-card">
                            <div class="stat-value" id="originalSize">-</div>
                            <div class="stat-label">سایز اصلی</div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-value" id="processedSize">-</div>
                            <div class="stat-label">سایز خروجی</div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-value" id="emojiCount">-</div>
                            <div class="stat-label">تعداد ایموجی</div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-value" id="processTime">-</div>
                            <div class="stat-label">زمان پردازش</div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Right Panel - Preview -->
            <div class="space-y-4">
                <!-- Original Image Preview -->
                <div class="control-panel">
                    <h3 class="text-lg font-semibold mb-4 flex items-center">
                        <i class="fas fa-image mr-2 text-red-500"></i>
                        عکس اصلی
                    </h3>
                    <div class="bg-gray-100 rounded-lg p-4 text-center min-h-48 flex items-center justify-center">
                        <canvas id="originalCanvas" class="hidden"></canvas>
                        <img id="originalPreview" class="max-w-full max-h-64 rounded-lg hidden">
                        <div id="originalPlaceholder" class="text-gray-500">
                            <i class="fas fa-image text-4xl mb-2"></i>
                            <p>عکس آپلود نشده</p>
                        </div>
                    </div>
                </div>

                <!-- Emoji Art Preview -->
                <div class="control-panel">
                    <h3 class="text-lg font-semibold mb-4 flex items-center">
                        <i class="fas fa-palette mr-2 text-yellow-500"></i>
                        نتیجه ایموجی
                    </h3>
                    <div class="emoji-preview" id="emojiPreview">
                        <div class="text-center text-gray-500 p-8">
                            <i class="fas fa-magic text-4xl mb-2"></i>
                            <p>در انتظار پردازش...</p>
                        </div>
                    </div>
                </div>

                <!-- Download Button -->
                <div class="control-panel">
                    <button id="downloadBtn" class="w-full bg-green-500 hover:bg-green-600 text-white font-semibold py-3 px-6 rounded-lg transition-colors duration-200 flex items-center justify-center disabled:opacity-50 disabled:cursor-not-allowed" disabled>
                        <i class="fas fa-download mr-2"></i>
                        دانلود نتیجه
                    </button>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Extended emoji palette with color mapping
        const EMOJI_PALETTE = {
            // Faces and skin tones
            '😀': [255, 220, 93], '😃': [255, 225, 95], '😄': [255, 215, 85], '😁': [255, 210, 80],
            '😊': [255, 200, 100], '😇': [255, 255, 255], '🙂': [255, 235, 150], '😉': [255, 225, 120],
            '😋': [255, 190, 110], '😎': [80, 80, 80], '😍': [255, 150, 150], '😘': [255, 180, 180],
            '😗': [255, 200, 180], '😙': [255, 210, 190], '😚': [255, 205, 185], '😜': [255, 195, 120],
            '😝': [255, 185, 100], '😛': [255, 175, 90], '🤑': [255, 255, 0], '🤗': [255, 200, 120],
            '🤔': [255, 215, 130], '🤐': [240, 200, 140], '🤨': [250, 210, 130], '😐': [240, 215, 140],
            '😑': [235, 210, 135], '😶': [245, 220, 145], '😏': [255, 205, 125], '😒': [230, 200, 130],
            '🙄': [245, 215, 135], '😬': [255, 255, 255], '🤥': [255, 180, 140], '😌': [255, 210, 160],
            '😔': [200, 180, 140], '😪': [220, 200, 160], '🤤': [255, 220, 180], '😴': [240, 220, 180],
            '😷': [255, 255, 255], '🤒': [255, 150, 150], '🤕': [255, 200, 200], '🤢': [150, 200, 100],
            '🤮': [100, 180, 80], '🤧': [255, 200, 200], '🥵': [255, 100, 100], '🥶': [150, 200, 255],
            '🥴': [200, 150, 200], '😵': [180, 180, 180], '🤯': [255, 150, 100], '🤠': [200, 150, 100],
            '🥳': [255, 200, 150], '😎': [50, 50, 50], '🤓': [200, 200, 200], '🧐': [255, 220, 180],
            
            // Hearts and emotions
            '❤️': [255, 0, 0], '🧡': [255, 165, 0], '💛': [255, 255, 0], '💚': [0, 255, 0],
            '💙': [0, 0, 255], '💜': [128, 0, 128], '🖤': [0, 0, 0], '🤍': [255, 255, 255],
            '🤎': [139, 69, 19], '💔': [200, 0, 0], '❣️': [255, 100, 100], '💕': [255, 150, 150],
            '💖': [255, 192, 203], '💗': [255, 182, 193], '💘': [255, 20, 147], '💝': [255, 105, 180],
            '💞': [255, 160, 200], '💟': [255, 140, 180], '💢': [255, 0, 0], '💥': [255, 165, 0],
            '💫': [255, 255, 0], '💦': [0, 191, 255], '💨': [220, 220, 220], '💭': [245, 245, 245],
            '💬': [255, 255, 255], '💯': [255, 0, 0], '💢': [255, 69, 0], '💣': [0, 0, 0],
            '💤': [173, 216, 230], '🕳️': [0, 0, 0], '💊': [255, 255, 255], '🩹': [255, 228, 196],
            
            // Nature and weather
            '🌞': [255, 255, 0], '🌝': [255, 255, 0], '🌛': [255, 255, 220], '🌜': [255, 255, 200],
            '🌚': [50, 50, 50], '🌕': [255, 255, 255], '🌖': [200, 200, 200], '🌗': [150, 150, 150],
            '🌘': [100, 100, 100], '🌑': [50, 50, 50], '🌒': [80, 80, 80], '🌓': [120, 120, 120],
            '🌔': [180, 180, 180], '🌙': [255, 255, 200], '⭐': [255, 255, 0], '🌟': [255, 255, 100],
            '💫': [255, 255, 150], '✨': [255, 255, 200], '☀️': [255, 255, 0], '🌤️': [255, 255, 150],
            '⛅': [255, 255, 255], '🌥️': [200, 200, 200], '☁️': [220, 220, 220], '🌦️': [180, 180, 200],
            '🌧️': [100, 100, 150], '⛈️': [50, 50, 100], '🌩️': [80, 80, 120], '🌨️': [255, 255, 255],
            '❄️': [255, 255, 255], '☃️': [255, 255, 255], '⛄': [255, 255, 255], '🌬️': [200, 200, 255],
            '💨': [220, 220, 220], '🌪️': [150, 150, 150], '🌈': [255, 100, 100], '🔥': [255, 69, 0],
            '💧': [0, 191, 255], '🌊': [0, 100, 200], '🏔️': [150, 150, 150], '🏕️': [100, 150, 50],
            '🏖️': [255, 228, 181], '🏜️': [255, 218, 185], '🏞️': [100, 200, 100], '🏟️': [100, 150, 50],
            
            // Animals
            '🐶': [139, 69, 19], '🐱': [255, 165, 0], '🐭': [169, 169, 169], '🐹': [255, 215, 0],
            '🐰': [255, 255, 255], '🦊': [255, 140, 0], '🐻': [139, 69, 19], '🐼': [255, 255, 255],
            '🐨': [169, 169, 169], '🐯': [255, 140, 0], '🦁': [255, 215, 0], '🐮': [255, 255, 255],
            '🐷': [255, 192, 203], '🐽': [255, 182, 193], '🐸': [0, 255, 0], '🐵': [139, 69, 19],
            '🙈': [139, 69, 19], '🙉': [139, 69, 19], '🙊': [139, 69, 19], '🐒': [139, 69, 19],
            '🐔': [255, 255, 255], '🐧': [255, 255, 255], '🐦': [135, 206, 235], '🐤': [255, 255, 0],
            '🐣': [255, 255, 0], '🐥': [255, 255, 0], '🦆': [255, 255, 0], '🦅': [139, 69, 19],
            '🦉': [139, 69, 19], '🦇': [0, 0, 0], '🐺': [169, 169, 169], '🐗': [139, 69, 19],
            '🐴': [139, 69, 19], '🦄': [255, 255, 255], '🐝': [255, 215, 0], '🐛': [0, 255, 0],
            '🦋': [255, 140, 0], '🐌': [139, 69, 19], '🐞': [255, 0, 0], '🐜': [0, 0, 0],
            '🦗': [0, 255, 0], '🕷️': [0, 0, 0], '🦂': [139, 69, 19], '🐢': [0, 128, 0],
            '🐍': [0, 255, 0], '🦎': [0, 255, 0], '🐙': [255, 69, 0], '🦑': [255, 69, 0],
            '🦐': [255, 69, 0], '🦞': [255, 0, 0], '🦀': [255, 0, 0], '🐡': [255, 255, 0],
            '🐠': [0, 100, 255], '🐟': [169, 169, 169], '🐬': [169, 169, 169], '🐳': [169, 169, 169],
            '🐋': [0, 0, 139], '🦈': [169, 169, 169], '🐊': [0, 128, 0], '🐅': [255, 140, 0],
            '🐆': [255, 215, 0], '🦓': [255, 255, 255], '🦍': [0, 0, 0], '🦧': [139, 69, 19],
            '🐘': [169, 169, 169], '🦏': [169, 169, 169], '🦛': [169, 169, 169], '🐪': [139, 69, 19],
            '🐫': [139, 69, 19], '🦒': [255, 215, 0], '🐃': [139, 69, 19], '🐂': [139, 69, 19],
            '🐄': [255, 255, 255], '🐎': [139, 69, 19], '🐖': [255, 192, 203], '🐏': [255, 255, 255],
            '🐑': [255, 255, 255], '🐐': [255, 255, 255], '🦌': [139, 69, 19], '🐕': [139, 69, 19],
            '🐩': [255, 255, 255], '🐈': [255, 165, 0], '🐓': [255, 255, 255], '🦃': [139, 69, 19],
            '🕊️': [255, 255, 255], '🐇': [255, 255, 255], '🐁': [169, 169, 169], '🐀': [169, 169, 169],
            '🐿️': [139, 69, 19], '🦔': [139, 69, 19], '🐾': [139, 69, 19], '🐉': [0, 255, 0],
            '🐲': [0, 255, 0], '🌵': [0, 128, 0], '🎄': [0, 128, 0], '🌲': [0, 128, 0],
            '🌳': [0, 128, 0], '🌴': [0, 128, 0], '🌱': [0, 255, 0], '🌿': [0, 255, 0],
            '☘️': [0, 255, 0], '🍀': [0, 255, 0], '🎋': [0, 255, 0], '🍃': [0, 255, 0],
            
            // Food and objects
            '🍎': [255, 0, 0], '🍊': [255, 165, 0], '🍋': [255, 255, 0], '🍌': [255, 255, 0],
            '🍉': [255, 0, 0], '🍇': [128, 0, 128], '🍓': [255, 0, 0], '🍈': [255, 215, 0],
            '🍒': [255, 0, 0], '🍑': [255, 218, 185], '🍍': [255, 215, 0], '🥭': [255, 165, 0],
            '🍅': [255, 0, 0], '🍆': [128, 0, 128], '🥑': [0, 128, 0], '🥦': [0, 128, 0],
            '🥬': [0, 255, 0], '🥒': [0, 255, 0], '🌶️': [255, 0, 0], '🌽': [255, 255, 0],
            '🥕': [255, 165, 0], '🥔': [139, 69, 19], '🍠': [255, 140, 0], '🥐': [255, 215, 0],
            '🍞': [255, 228, 181], '🥖': [255, 228, 181], '🥨': [139, 69, 19], '🥯': [255, 228, 181],
            '🧀': [255, 255, 0], '🥚': [255, 255, 255], '🍳': [255, 255, 255], '🥞': [255, 215, 0],
            '🥓': [255, 0, 0], '🍗': [255, 215, 0], '🍖': [255, 0, 0], '🌭': [255, 165, 0],
            '🍔': [255, 215, 0], '🍟': [255, 215, 0], '🍕': [255, 215, 0], '🥪': [255, 228, 181],
            '🥙': [255, 228, 181], '🌮': [255, 215, 0], '🌯': [255, 228, 181], '🥗': [0, 255, 0],
            '🥘': [255, 165, 0], '🍝': [255, 215, 0], '🍜': [255, 215, 0], '🍲': [255, 165, 0],
            '🍛': [255, 255, 255], '🍣': [255, 255, 255], '🍱': [255, 255, 255], '🥟': [255, 255, 255],
            '🍤': [255, 0, 0], '🍙': [255, 255, 255], '🍚': [255, 255, 255], '🍘': [255, 255, 255],
            '🍥': [255, 255, 255], '🥠': [255, 228, 181], '🍢': [255, 228, 181], '🍡': [255, 255, 255],
            '🍧': [255, 255, 255], '🍨': [255, 255, 255], '🍦': [255, 255, 255], '🥧': [255, 228, 181],
            '🍰': [255, 255, 255], '🎂': [255, 255, 255], '🧁': [255, 192, 203], '🍭': [255, 0, 0],
            '🍬': [255, 255, 255], '🍫': [139, 69, 19], '🍿': [255, 255, 255], '🍩': [255, 215, 0],
            '🍪': [255, 228, 181], '🌰': [139, 69, 19], '🥜': [139, 69, 19], '🍯': [255, 215, 0],
            '🥛': [255, 255, 255], '🍼': [255, 255, 255], '☕': [139, 69, 19], '🍵': [0, 255, 0],
            '🥤': [255, 255, 255], '🍶': [255, 255, 255], '🍺': [255, 215, 0], '🍻': [255, 215, 0],
            '🥂': [255, 255, 255], '🍷': [128, 0, 128], '🥃': [255, 215, 0], '🍸': [255, 192, 203],
            '🍹': [255, 165, 0], '🍾': [0, 255, 0], '🥄': [192, 192, 192], '🍴': [192, 192, 192],
            '🥢': [139, 69, 19], '🏺': [139, 69, 19], '🌍': [0, 0, 255], '🌎': [0, 255, 0],
            '🌏': [255, 255, 0], '🌐': [0, 0, 255], '🗺️': [255, 228, 181], '🏔️': [169, 169, 169],
            '⛰️': [139, 69, 19], '🌋': [255, 0, 0], '🗻': [255, 255, 255], '🏕️': [0, 128, 0],
            '🏖️': [255, 228, 181], '🏜️': [255, 218, 185], '🏝️': [0, 255, 0], '🏞️': [0, 128, 0],
            '🏟️': [0, 128, 0], '🏛️': [255, 255, 255], '🏗️': [255, 165, 0], '🏘️': [255, 228, 181],
            '🏚️': [139, 69, 19], '🏠': [255, 0, 0], '🏡': [255, 0, 0], '🏢': [169, 169, 169],
            '🏣': [169, 169, 169], '🏤': [255, 0, 0], '🏥': [255, 255, 255], '🏦': [169, 169, 169],
            '🏧': [0, 0, 255], '🏨': [255, 255, 255], '🏩': [255, 192, 203], '🏪': [255, 165, 0],
            '🏫': [255, 255, 255], '🏬': [255, 255, 255], '🏭': [169, 169, 169], '🏮': [255, 0, 0],
            '🏯': [255, 215, 0], '🏰': [169, 169, 169], '🗼': [255, 0, 0], '🗽': [0, 255, 0],
            '⛪': [255, 255, 255], '🕌': [255, 215, 0], '🕍': [255, 255, 255], '⛩️': [255, 0, 0],
            '🕋': [0, 0, 0], '⛲': [255, 255, 255], '⛺': [255, 165, 0], '🌁': [169, 169, 169],
            '🌃': [0, 0, 139], '🏙️': [169, 169, 169], '🌄': [255, 215, 0], '🌅': [255, 165, 0],
            '🌆': [255, 140, 0], '🌇': [255, 69, 0], '🌉': [255, 215, 0], '♨️': [255, 255, 255],
            '🎠': [255, 192, 203], '🎡': [255, 255, 255], '🎢': [255, 0, 0], '💈': [255, 0, 0],
            '🎪': [255, 255, 255], '🚂': [0, 0, 139], '🚃': [255, 215, 0], '🚄': [255, 255, 255],
            '🚅': [255, 255, 255], '🚆': [255, 255, 255], '🚇': [255, 255, 255], '🚈': [255, 255, 255],
            '🚉': [255, 255, 255], '🚊': [255, 255, 255], '🚝': [255, 255, 255], '🚞': [255, 255, 255],
            '🚋': [255, 255, 255], '🚌': [255, 255, 0], '🚍': [255, 255, 0], '🚎': [255, 255, 0],
            '🚐': [255, 255, 255], '🚑': [255, 255, 255], '🚒': [255, 0, 0], '🚓': [255, 255, 255],
            '🚔': [255, 255, 255], '🚕': [255, 255, 0], '🚖': [255, 255, 0], '🚗': [255, 0, 0],
            '🚘': [255, 0, 0], '🚙': [255, 0, 0], '🚚': [255, 255, 255], '🚛': [255, 255, 255],
            '🚜': [255, 255, 0], '🏎️': [255, 0, 0], '🏍️': [255, 0, 0], '🛵': [255, 255, 255],
            '🚲': [255, 0, 0], '🛴': [255, 255, 255], '🛹': [255, 165, 0], '🚁': [255, 255, 255],
            '🚟': [255, 255, 255], '🚠': [255, 255, 255], '🚡': [255, 255, 255], '🛰️': [192, 192, 192],
            '🚀': [255, 255, 255], '🛸': [192, 192, 192], '🛎️': [255, 215, 0], '🧳': [139, 69, 19],
            '⌛': [255, 215, 0], '⏳': [255, 215, 0], '⌚': [0, 0, 0], '⏰': [255, 255, 255],
            '⏱️': [255, 255, 255], '⏲️': [255, 255, 255], '🕰️': [139, 69, 19], '🕛': [255, 255, 255],
            '🕧': [255, 255, 255], '🕐': [255, 255, 255], '🕜': [255, 255, 255], '🕑': [255, 255, 255],
            '🕝': [255, 255, 255], '🕒': [255, 255, 255], '🕞': [255, 255, 255], '🕓': [255, 255, 255],
            '🕟': [255, 255, 255], '🕔': [255, 255, 255], '🕠': [255, 255, 255], '🕕': [255, 255, 255],
            '🕡': [255, 255, 255], '🕖': [255, 255, 255], '🕢': [255, 255, 255], '🕗': [255, 255, 255],
            '🕣': [255, 255, 255], '🕘': [255, 255, 255], '🕤': [255, 255, 255], '🕙': [255, 255, 255],
            '🕥': [255, 255, 255], '🕚': [255, 255, 255], '🕦': [255, 255, 255], '🌑': [0, 0, 0],
            '🌒': [50, 50, 50], '🌓': [100, 100, 100], '🌔': [150, 150, 150], '🌕': [255, 255, 255],
            '🌖': [200, 200, 200], '🌗': [150, 150, 150], '🌘': [100, 100, 100], '🌙': [255, 255, 200],
            '🌚': [50, 50, 50], '🌛': [255, 255, 220], '🌜': [255, 255, 200], '🌝': [255, 255, 0],
            '🌞': [255, 255, 0], '⭐': [255, 255, 0], '🌟': [255, 255, 100], '💫': [255, 255, 150],
            '✨': [255, 255, 200], '☄️': [255, 165, 0], '☀️': [255, 255, 0], '🌤️': [255, 255, 150],
            '⛅': [255, 255, 255], '🌥️': [200, 200, 200], '☁️': [220, 220, 220], '🌦️': [180, 180, 200],
            '🌧️': [100, 100, 150], '⛈️': [50, 50, 100], '🌩️': [80, 80, 120], '🌨️': [255, 255, 255],
            '❄️': [255, 255, 255], '☃️': [255, 255, 255], '⛄': [255, 255, 255], '🌬️': [200, 200, 255],
            '💨': [220, 220, 220], '🌪️': [150, 150, 150], '🌈': [255, 100, 100], '🔥': [255, 69, 0],
            '💧': [0, 191, 255], '🌊': [0, 100, 200], '⚡': [255, 255, 0], '🔆': [255, 255, 0],
            '🔅': [255, 255, 200], '💡': [255, 255, 0], '🔦': [255, 255, 255], '🏮': [255, 0, 0],
            '🪔': [255, 165, 0], '🕯️': [255, 255, 0], '🧯': [255, 0, 0], '🛢️': [0, 0, 0],
            '💸': [0, 255, 0], '💵': [0, 255, 0], '💴': [255, 255, 0], '💶': [255, 165, 0],
            '💷': [128, 0, 128], '💰': [255, 215, 0], '💳': [255, 255, 255], '🧾': [255, 255, 255],
            '💎': [0, 191, 255], '⚖️': [255, 215, 0], '🧰': [255, 0, 0], '🔧': [192, 192, 192],
            '🔨': [139, 69, 19], '⚒️': [192, 192, 192], '🛠️': [192, 192, 192], '⛏️': [139, 69, 19],
            '🔩': [192, 192, 192], '⚙️': [192, 192, 192], '🧱': [255, 0, 0], '⛓️': [192, 192, 192],
            '🧲': [255, 0, 0], '🔫': [0, 0, 0], '💣': [0, 0, 0], '🧨': [255, 0, 0],
            '🔪': [192, 192, 192], '🗡️': [192, 192, 192], '⚔️': [192, 192, 192], '🛡️': [192, 192, 192],
            '🚬': [255, 255, 255], '⚰️': [139, 69, 19], '⚱️': [139, 69, 19], '🏺': [139, 69, 19],
            '🔮': [128, 0, 128], '📿': [139, 69, 19], '🧿': [0, 0, 255], '💈': [255, 0, 0],
            '⚗️': [255, 255, 255], '🔭': [0, 0, 139], '🔬': [255, 255, 255], '🕳️': [0, 0, 0],
            '💊': [255, 255, 255], '💉': [255, 255, 255], '🧬': [0, 255, 0], '🦠': [0, 255, 0],
            '🧫': [255, 255, 255], '🧪': [255, 255, 255], '🌡️': [255, 255, 255], '🧹': [139, 69, 19],
            '🧺': [139, 69, 19], '🧻': [255, 255, 255], '🚽': [255, 255, 255], '🚿': [255, 255, 255],
            '🛁': [255, 255, 255], '🛀': [255, 220, 177], '🧴': [255, 255, 255], '🧷': [192, 192, 192],
            '🧸': [139, 69, 19], '🧵': [255, 255, 255], '🧶': [255, 0, 0], '🥽': [255, 255, 255],
            '🥼': [255, 255, 255], '🥾': [139, 69, 19], '🧦': [255, 255, 255], '🧤': [255, 255, 255],
            '🧣': [255, 0, 0], '🎩': [0, 0, 0], '🧢': [255, 0, 0], '👒': [255, 215, 0],
            '🎓': [0, 0, 0], '👑': [255, 215, 0], '👝': [255, 192, 203], '👛': [255, 192, 203],
            '👜': [139, 69, 19], '💼': [139, 69, 19], '🎒': [255, 0, 0], '👞': [0, 0, 0],
            '👟': [255, 255, 255], '🥿': [255, 228, 181], '🩴': [255, 165, 0], '👠': [255, 0, 0],
            '👡': [255, 192, 203], '👢': [139, 69, 19], '👕': [255, 255, 255], '👔': [255, 255, 255],
            '👗': [255, 192, 203], '👘': [255, 0, 0], '👙': [255, 192, 203], '👚': [255, 192, 203],
            '👖': [0, 0, 139], '🩱': [255, 0, 0], '🩲': [255, 255, 255], '🩳': [255, 255, 255],
            '👴': [255, 228, 181], '👵': [255, 228, 181], '👶': [255, 228, 181], '👧': [255, 228, 181],
            '👦': [255, 228, 181], '👩': [255, 228, 181], '👨': [255, 228, 181], '👱': [255, 228, 181],
            '👲': [255, 228, 181], '👳': [255, 228, 181], '👮': [255, 228, 181], '👷': [255, 228, 181],
            '💂': [255, 228, 181], '🕵️': [255, 228, 181], '👩‍⚕️': [255, 228, 181], '👨‍⚕️': [255, 228, 181],
            '👩‍🌾': [255, 228, 181], '👨‍🌾': [255, 228, 181], '👩‍🍳': [255, 228, 181], '👨‍🍳': [255, 228, 181],
            '👩‍🎓': [255, 228, 181], '👨‍🎓': [255, 228, 181], '👩‍🎤': [255, 228, 181], '👨‍🎤': [255, 228, 181],
            '👩‍🏫': [255, 228, 181], '👨‍🏫': [255, 228, 181], '👩‍🏭': [255, 228, 181], '👨‍🏭': [255, 228, 181],
            '👩‍💻': [255, 228, 181], '👨‍💻': [255, 228, 181], '👩‍💼': [255, 228, 181], '👨‍💼': [255, 228, 181],
            '👩‍🔧': [255, 228, 181], '👨‍🔧': [255, 228, 181], '👩‍🔬': [255, 228, 181], '👨‍🔬': [255, 228, 181],
            '👩‍🎨': [255, 228, 181], '👨‍🎨': [255, 228, 181], '👩‍🚒': [255, 228, 181], '👨‍🚒': [255, 228, 181],
            '👩‍✈️': [255, 228, 181], '👨‍✈️': [255, 228, 181], '👩‍🚀': [255, 228, 181], '👨‍🚀': [255, 228, 181],
            '👩‍⚖️': [255, 228, 181], '👨‍⚖️': [255, 228, 181], '👰': [255, 228, 181], '🤵': [255, 228, 181],
            '👸': [255, 228, 181], '🤴': [255, 228, 181], '🤶': [255, 228, 181], '🎅': [255, 228, 181],
            '🧙': [255, 228, 181], '🧚': [255, 228, 181], '🧛': [255, 228, 181], '🧜': [255, 228, 181],
            '🧝': [255, 228, 181], '🧞': [255, 228, 181], '🧟': [255, 228, 181], '💆': [255, 228, 181],
            '💇': [255, 228, 181], '🚶': [255, 228, 181], '🧍': [255, 228, 181], '🧎': [255, 228, 181],
            '🏃': [255, 228, 181], '💃': [255, 228, 181], '🕺': [255, 228, 181], '🕴️': [255, 228, 181],
            '👯': [255, 228, 181], '🧖': [255, 228, 181], '🧗': [255, 228, 181], '🤺': [255, 228, 181],
            '🏇': [255, 228, 181], '⛷️': [255, 228, 181], '🏂': [255, 228, 181], '🏌️': [255, 228, 181],
            '🏄': [255, 228, 181], '🚣': [255, 228, 181], '🏊': [255, 228, 181], '⛹️': [255, 228, 181],
            '🏋️': [255, 228, 181], '🚴': [255, 228, 181], '🚵': [255, 228, 181], '🤸': [255, 228, 181],
            '🤼': [255, 228, 181], '🤽': [255, 228, 181], '🤾': [255, 228, 181], '🤹': [255, 228, 181],
            '🧘': [255, 228, 181], '🛀': [255, 228, 181], '🛌': [255, 228, 181], '🕯️': [255, 255, 0],
            '🔔': [255, 215, 0], '🔕': [255, 215, 0], '🎵': [0, 0, 0], '🎶': [0, 0, 0],
            '🎼': [255, 255, 255], '🎹': [255, 255, 255], '🥁': [139, 69, 19], '🎷': [255, 215, 0],
            '🎺': [255, 215, 0], '🎸': [139, 69, 19], '🎻': [139, 69, 19], '🎤': [0, 0, 0],
            '🎧': [0, 0, 0], '📻': [0, 0, 0], '🎬': [0, 0, 0], '🎭': [255, 255, 255],
            '🎨': [255, 255, 255], '🎪': [255, 255, 255], '🎰': [255, 215, 0], '🎲': [255, 255, 255],
            '🎯': [255, 0, 0], '🎱': [0, 0, 0], '🎳': [255, 255, 255], '🎮': [128, 0, 128],
            '🎯': [255, 0, 0], '🛷': [139, 69, 19], '🥌': [169, 169, 169], '🎣': [139, 69, 19],
            '🎽': [255, 255, 255], '🥊': [255, 0, 0], '🥋': [255, 255, 255], '🎖️': [255, 215, 0],
            '🏆': [255, 215, 0], '🏅': [255, 215, 0], '🥇': [255, 215, 0], '🥈': [192, 192, 192],
            '🥉': [205, 127, 50], '⚽': [255, 255, 255], '⚾': [255, 255, 255], '🥎': [255, 255, 0],
            '🏀': [255, 140, 0], '🏐': [255, 255, 255], '🏈': [139, 69, 19], '🏉': [139, 69, 19],
            '🎾': [255, 255, 0], '🥏': [255, 255, 255], '🎳': [255, 255, 255], '🏓': [255, 140, 0],
            '🏸': [255, 255, 255], '🥍': [139, 69, 19], '🏑': [255, 255, 255], '🏒': [139, 69, 19],
            '🥅': [255, 255, 255], '⛳': [255, 255, 255], '🏹': [139, 69, 19], '🎣': [139, 69, 19],
            '🤿': [255, 255, 255], '🥽': [255, 255, 255], '🎿': [255, 255, 255], '🛷': [139, 69, 19],
            '🥌': [169, 169, 169], '🎯': [255, 0, 0], '🎱': [0, 0, 0], '🔮': [128, 0, 128],
            '🎰': [255, 215, 0], '🎲': [255, 255, 255], '🧩': [255, 255, 255], '🃏': [255, 255, 255],
            '🀄': [255, 255, 255], '🎴': [255, 255, 255], '🎭': [255, 255, 255], '🖼️': [139, 69, 19],
            '🎨': [255, 255, 255], '🧵': [255, 255, 255], '🧶': [255, 0, 0], '🎼': [255, 255, 255],
            '🎵': [0, 0, 0], '🎶': [0, 0, 0], '🎙️': [0, 0, 0], '🎚️': [0, 0, 0],
            '🎛️': [0, 0, 0], '🎤': [0, 0, 0], '🎧': [0, 0, 0], '📻': [0, 0, 0],
            '📱': [0, 0, 0], '📲': [0, 0, 0], '☎️': [255, 0, 0], '📞': [0, 0, 0],
            '📟': [0, 0, 0], '📠': [255, 255, 255], '🔋': [0, 255, 0], '🔌': [255, 255, 255],
            '💻': [192, 192, 192], '🖥️': [192, 192, 192], '🖨️': [255, 255, 255], '⌨️': [255, 255, 255],
            '🖱️': [255, 255, 255], '🖲️': [255, 255, 255], '💽': [255, 255, 255], '💾': [0, 0, 0],
            '💿': [192, 192, 192], '📀': [255, 255, 255], '🧮': [139, 69, 19], '🎥': [0, 0, 0],
            '🎞️': [0, 0, 0], '📽️': [0, 0, 0], '🎬': [0, 0, 0], '📺': [0, 0, 0],
            '📷': [0, 0, 0], '📸': [0, 0, 0], '📹': [0, 0, 0], '📼': [0, 0, 0],
            '🔍': [255, 255, 255], '🔎': [255, 255, 255], '🕯️': [255, 255, 0], '💡': [255, 255, 0],
            '🔦': [255, 255, 255], '🏮': [255, 0, 0], '🪔': [255, 165, 0], '📔': [0, 255, 0],
            '📕': [255, 0, 0], '📖': [255, 255, 255], '📗': [0, 255, 0], '📘': [0, 0, 255],
            '📙': [255, 165, 0], '📚': [255, 255, 255], '📓': [255, 255, 255], '📒': [255, 255, 255],
            '📃': [255, 255, 255], '📜': [255, 228, 181], '📄': [255, 255, 255], '📰': [255, 255, 255],
            '🗞️': [255, 255, 255], '📑': [255, 255, 255], '🔖': [255, 255, 0], '🏷️': [255, 255, 255],
            '💰': [255, 215, 0], '💴': [255, 255, 0], '💵': [0, 255, 0], '💶': [255, 165, 0],
            '💷': [128, 0, 128], '💸': [0, 255, 0], '💳': [255, 255, 255], '🧾': [255, 255, 255],
            '💹': [0, 255, 0], '💱': [255, 255, 255], '💲': [0, 255, 0], '✉️': [255, 255, 255],
            '📧': [255, 255, 255], '📨': [255, 255, 255], '📩': [255, 255, 255], '📤': [255, 255, 255],
            '📥': [255, 255, 255], '📦': [139, 69, 19], '📫': [0, 0, 255], '📪': [0, 0, 255],
            '📬': [0, 0, 255], '📭': [0, 0, 255], '📮': [255, 0, 0], '🗳️': [255, 255, 255],
            '✏️': [255, 215, 0], '✒️': [0, 0, 0], '🖋️': [0, 0, 0], '🖊️': [0, 0, 0],
            '🖌️': [139, 69, 19], '🖍️': [255, 0, 0], '📝': [255, 255, 255], '💼': [139, 69, 19],
            '📁': [255, 255, 0], '📂': [255, 255, 0], '🗂️': [255, 255, 0], '📅': [255, 255, 255],
            '📆': [255, 255, 255], '🗒️': [255, 255, 255], '🗓️': [255, 255, 255], '📇': [255, 255, 255],
            '📈': [255, 255, 255], '📉': [255, 255, 255], '📊': [255, 255, 255], '📋': [139, 69, 19],
            '📌': [255, 0, 0], '📍': [255, 0, 0], '📎': [192, 192, 192], '🖇️': [192, 192, 192],
            '📏': [255, 255, 0], '📐': [255, 255, 0], '✂️': [192, 192, 192], '🗃️': [139, 69, 19],
            '🗄️': [192, 192, 192], '🗑️': [192, 192, 192], '🔒': [255, 215, 0], '🔓': [255, 215, 0],
            '🔏': [255, 215, 0], '🔐': [255, 215, 0], '🔑': [255, 215, 0], '🗝️': [255, 215, 0],
            '🔨': [139, 69, 19], '🪓': [139, 69, 19], '⛏️': [139, 69, 19], '⚒️': [192, 192, 192],
            '🛠️': [192, 192, 192], '🗡️': [192, 192, 192], '⚔️': [192, 192, 192], '🔫': [0, 0, 0],
            '🏹': [139, 69, 19], '🛡️': [192, 192, 192], '🔧': [192, 192, 192], '🔩': [192, 192, 192],
            '⚙️': [192, 192, 192], '🗜️': [192, 192, 192], '⚖️': [255, 215, 0], '🦯': [255, 255, 255],
            '🔗': [192, 192, 192], '⛓️': [192, 192, 192], '🧰': [255, 0, 0], '🧲': [255, 0, 0],
            '⚗️': [255, 255, 255], '🧪': [255, 255, 255], '🧫': [255, 255, 255], '🧬': [0, 255, 0],
            '🔬': [255, 255, 255], '🔭': [0, 0, 139], '📡': [192, 192, 192], '💉': [255, 255, 255],
            '🩸': [255, 0, 0], '💊': [255, 255, 255], '🩹': [255, 228, 196], '🩺': [0, 0, 0],
            '🚪': [139, 69, 19], '🛏️': [255, 255, 255], '🛋️': [139, 69, 19], '🚽': [255, 255, 255],
            '🚿': [255, 255, 255], '🛁': [255, 255, 255], '🧴': [255, 255, 255], '🧷': [192, 192, 192],
            '🧹': [139, 69, 19], '🧺': [139, 69, 19], '🧻': [255, 255, 255], '🧼': [255, 255, 255],
            '🧽': [255, 255, 0], '🧯': [255, 0, 0], '🛒': [255, 0, 0], '🚬': [255, 255, 255],
            '⚰️': [139, 69, 19], '⚱️': [139, 69, 19], '🗿': [169, 169, 169], '🚰': [255, 255, 255],
            '🚱': [255, 255, 255], '🚭': [255, 255, 255], '🚯': [255, 255, 255], '🚳': [255, 255, 255],
            '🚷': [255, 255, 255], '🚸': [255, 255, 0], '⛔': [255, 0, 0], '🚫': [255, 0, 0],
            '🚳': [255, 255, 255], '🚭': [255, 255, 255], '🚯': [255, 255, 255], '🚱': [255, 255, 255],
            '🚷': [255, 255, 255], '📵': [255, 255, 255], '🔞': [255, 255, 255], '☢️': [255, 255, 0],
            '☣️': [255, 255, 0], '⬆️': [0, 0, 255], '↗️': [0, 0, 255], '➡️': [0, 0, 255],
            '↘️': [0, 0, 255], '⬇️': [0, 0, 255], '↙️': [0, 0, 255], '⬅️': [0, 0, 255],
            '↖️': [0, 0, 255], '↕️': [0, 0, 255], '↔️': [0, 0, 255], '↩️': [0, 0, 255],
            '↪️': [0, 0, 255], '⤴️': [0, 0, 255], '⤵️': [0, 0, 255], '🔃': [0, 0, 255],
            '🔄': [0, 0, 255], '🔙': [0, 0, 255], '🔚': [0, 0, 255], '🔛': [0, 0, 255],
            '🔜': [0, 0, 255], '🔝': [0, 0, 255], '🛐': [255, 255, 255], '⚛️': [255, 255, 255],
            '🕉️': [255, 255, 255], '✡️': [255, 255, 255], '☸️': [255, 255, 255], '☯️': [255, 255, 255],
            '✝️': [255, 255, 255], '☦️': [255, 255, 255], '☪️': [255, 255, 255], '☮️': [255, 255, 255],
            '🕎': [255, 255, 255], '🔯': [255, 255, 255], '♈': [255, 255, 255], '♉': [255, 255, 255],
            '♊': [255, 255, 255], '♋': [255, 255, 255], '♌': [255, 255, 255], '♍': [255, 255, 255],
            '♎': [255, 255, 255], '♏': [255, 255, 255], '♐': [255, 255, 255], '♑': [255, 255, 255],
            '♒': [255, 255, 255], '♓': [255, 255, 255], '⛎': [255, 255, 255], '🔀': [0, 0, 255],
            '🔁': [0, 0, 255], '🔂': [0, 0, 255], '▶️': [0, 0, 255], '⏩': [0, 0, 255],
            '⏭️': [0, 0, 255], '⏯️': [0, 0, 255], '◀️': [0, 0, 255], '⏪': [0, 0, 255],
            '⏮️': [0, 0, 255], '🔼': [0, 0, 255], '⏫': [0, 0, 255], '🔽': [0, 0, 255],
            '⏬': [0, 0, 255], '⏸️': [0, 0, 255], '⏹️': [0, 0, 255], '⏺️': [255, 0, 0],
            '⏏️': [0, 0, 255], '🎦': [0, 0, 255], '🔅': [255, 255, 200], '🔆': [255, 255, 0],
            '📶': [0, 255, 0], '📳': [255, 255, 255], '📴': [255, 255, 255], '♀️': [255, 255, 255],
            '♂️': [255, 255, 255], '⚧️': [255, 255, 255], '✖️': [255, 0, 0], '➕': [0, 255, 0],
            '➖': [255, 0, 0], '➗': [255, 255, 255], '♾️': [255, 255, 255], '‼️': [255, 0, 0],
            '⁉️': [255, 0, 0], '❓': [255, 255, 255], '❔': [255, 255, 255], '❕': [255, 255, 255],
            '❗': [255, 0, 0], '〰️': [255, 255, 255], '💱': [255, 255, 255], '💲': [0, 255, 0],
            '⚕️': [255, 255, 255], '♻️': [0, 255, 0], '⚜️': [255, 255, 255], '🔱': [255, 255, 255],
            '📛': [255, 0, 0], '🔰': [255, 255, 0], '⭕': [255, 0, 0], '✅': [0, 255, 0],
            '☑️': [0, 255, 0], '✔️': [0, 255, 0], '❌': [255, 0, 0], '❎': [255, 0, 0],
            '➰': [255, 255, 255], '➿': [255, 255, 255], '〽️': [255, 255, 255], '✳️': [255, 255, 255],
            '✴️': [255, 255, 255], '❇️': [255, 255, 255], '©️': [255, 255, 255], '®️': [255, 255, 255],
            '™️': [255, 255, 255], '#️⃣': [255, 255, 255], '*️⃣': [255, 255, 255], '0️⃣': [255, 255, 255],
            '1️⃣': [255, 255, 255], '2️⃣': [255, 255, 255], '3️⃣': [255, 255, 255], '4️⃣': [255, 255, 255],
            '5️⃣': [255, 255, 255], '6️⃣': [255, 255, 255], '7️⃣': [255, 255, 255], '8️⃣': [255, 255, 255],
            '9️⃣': [255, 255, 255], '🔟': [255, 255, 255], '🔠': [255, 255, 255], '🔡': [255, 255, 255],
            '🔢': [255, 255, 255], '🔣': [255, 255, 255], '🔤': [255, 255, 255], '🅰️': [255, 0, 0],
            '🆎': [255, 0, 0], '🅱️': [255, 0, 0], '🆑': [255, 0, 0], '🆒': [0, 0, 255],
            '🆓': [0, 255, 0], 'ℹ️': [0, 0, 255], '🆔': [255, 255, 255], 'Ⓜ️': [255, 0, 0],
            '🆕': [255, 255, 0], '🆖': [255, 255, 0], '🅾️': [255, 0, 0], '🆗': [0, 0, 255],
            '🅿️': [0, 0, 255], '🆘': [255, 0, 0], '🆙': [0, 0, 255], '🆚': [255, 255, 255],
            '🈁': [255, 255, 255], '🈂️': [255, 255, 255], '🈷️': [255, 255, 255], '🈶': [255, 255, 255],
            '🈯': [255, 255, 255], '🉐': [255, 255, 255], '🈹': [255, 255, 255], '🈚': [255, 255, 255],
            '🈲': [255, 255, 255], '🉑': [255, 255, 255], '🈸': [255, 255, 255], '🈴': [255, 255, 255],
            '🈳': [255, 255, 255], '㊗️': [255, 255, 255], '㊙️': [255, 255, 255], '🈺': [255, 255, 255],
            '🈵': [255, 255, 255], '🔴': [255, 0, 0], '🟠': [255, 165, 0], '🟡': [255, 255, 0],
            '🟢': [0, 255, 0], '🔵': [0, 0, 255], '🟣': [128, 0, 128], '🟤': [139, 69, 19],
            '⚫': [0, 0, 0], '⚪': [255, 255, 255], '🟥': [255, 0, 0], '🟧': [255, 165, 0],
            '🟨': [255, 255, 0], '🟩': [0, 255, 0], '🟦': [0, 0, 255], '🟪': [128, 0, 128],
            '🟫': [139, 69, 19], '⬛': [0, 0, 0], '⬜': [255, 255, 255], '◼️': [0, 0, 0],
            '◻️': [255, 255, 255], '◾': [0, 0, 0], '◽': [255, 255, 255], '▪️': [0, 0, 0],
            '▫️': [255, 255, 255], '🔶': [255, 165, 0], '🔷': [0, 0, 255], '🔸': [255, 165, 0],
            '🔹': [0, 0, 255], '🔺': [255, 0, 0], '🔻': [255, 0, 0], '💠': [0, 191, 255],
            '🔘': [0, 0, 0], '🔳': [255, 255, 255], '🔲': [0, 0, 0], '🏁': [255, 255, 255],
            '🚩': [255, 0, 0], '🎌': [255, 255, 255], '🏴': [0, 0, 0], '🏳️': [255, 255, 255],
            '🏳️‍🌈': [255, 100, 100], '🏳️‍⚧️': [255, 255, 255], '🏴‍☠️': [0, 0, 0]
        };

        // Advanced color calculation utilities
        function rgbToLab(r, g, b) {
            // Convert RGB to LAB color space for better color matching
            let x, y, z;
            
            r = r / 255;
            g = g / 255;
            b = b / 255;

            if (r > 0.04045) {
                r = Math.pow((r + 0.055) / 1.055, 2.4);
            } else {
                r = r / 12.92;
            }

            if (g > 0.04045) {
                g = Math.pow((g + 0.055) / 1.055, 2.4);
            } else {
                g = g / 12.92;
            }

            if (b > 0.04045) {
                b = Math.pow((b + 0.055) / 1.055, 2.4);
            } else {
                b = b / 12.92;
            }

            x = (r * 0.4124 + g * 0.3576 + b * 0.1805) / 0.95047;
            y = (r * 0.2126 + g * 0.7152 + b * 0.0722) / 1.00000;
            z = (r * 0.0193 + g * 0.1192 + b * 0.9505) / 1.08883;

            if (x > 0.008856) {
                x = Math.pow(x, 1/3);
            } else {
                x = (7.787 * x) + (16/116);
            }

            if (y > 0.008856) {
                y = Math.pow(y, 1/3);
            } else {
                y = (7.787 * y) + (16/116);
            }

            if (z > 0.008856) {
                z = Math.pow(z, 1/3);
            } else {
                z = (7.787 * z) + (16/116);
            }

            return [
                (116 * y) - 16,
                500 * (x - y),
                200 * (y - z)
            ];
        }

        function deltaE(lab1, lab2) {
            // Calculate color difference in LAB space
            const dL = lab1[0] - lab2[0];
            const da = lab1[1] - lab2[1];
            const db = lab1[2] - lab2[2];
            return Math.sqrt(dL * dL + da * da + db * db);
        }

        function getClosestEmoji(r, g, b, sensitivity = 80) {
            const targetLab = rgbToLab(r, g, b);
            let minDistance = Infinity;
            let bestEmoji = '⬜';

            for (const [emoji, color] of Object.entries(EMOJI_PALETTE)) {
                const emojiLab = rgbToLab(color[0], color[1], color[2]);
                const distance = deltaE(targetLab, emojiLab);
                
                if (distance < minDistance) {
                    minDistance = distance;
                    bestEmoji = emoji;
                }
            }

            // If sensitivity is high, allow more color variations
            if (sensitivity > 90) {
                const secondBestOptions = [];
                for (const [emoji, color] of Object.entries(EMOJI_PALETTE)) {
                    const emojiLab = rgbToLab(color[0], color[1], color[2]);
                    const distance = deltaE(targetLab, emojiLab);
                    
                    if (distance < minDistance * 1.2) {
                        secondBestOptions.push(emoji);
                    }
                }
                
                if (secondBestOptions.length > 0) {
                    return secondBestOptions[Math.floor(Math.random() * secondBestOptions.length)];
                }
            }

            return bestEmoji;
        }

        function applyDithering(imageData, width, height) {
            // Floyd-Steinberg dithering
            const data = imageData.data;
            
            for (let y = 0; y < height - 1; y++) {
                for (let x = 1; x < width - 1; x++) {
                    const idx = (y * width + x) * 4;
                    
                    const oldR = data[idx];
                    const oldG = data[idx + 1];
                    const oldB = data[idx + 2];
                    
                    // Get closest emoji color
                    const bestEmoji = getClosestEmoji(oldR, oldG, oldB);
                    const newColor = EMOJI_PALETTE[bestEmoji];
                    
                    data[idx] = newColor[0];
                    data[idx + 1] = newColor[1];
                    data[idx + 2] = newColor[2];
                    
                    const errR = oldR - newColor[0];
                    const errG = oldG - newColor[1];
                    const errB = oldB - newColor[2];
                    
                    // Distribute error to neighboring pixels
                    const neighbors = [
                        [x + 1, y, 7/16],
                        [x - 1, y + 1, 3/16],
                        [x, y + 1, 5/16],
                        [x + 1, y + 1, 1/16]
                    ];
                    
                    for (const [nx, ny, factor] of neighbors) {
                        if (nx >= 0 && nx < width && ny >= 0 && ny < height) {
                            const nIdx = (ny * width + nx) * 4;
                            data[nIdx] += errR * factor;
                            data[nIdx + 1] += errG * factor;
                            data[nIdx + 2] += errB * factor;
                        }
                    }
                }
            }
            
            return imageData;
        }

        // Global variables
        let originalImage = null;
        let processedResult = '';
        let currentSettings = {
            resolution: 50,
            colorSensitivity: 80,
            emojiSize: 16,
            contrast: 100,
            dithering: false,
            preserveAspect: true
        };

        // Initialize event listeners
        document.addEventListener('DOMContentLoaded', function() {
            initializeControls();
            setupDragDrop();
            setupSliders();
        });

        function initializeControls() {
            const imageInput = document.getElementById('imageInput');
            const processBtn = document.getElementById('processBtn');
            const downloadBtn = document.getElementById('downloadBtn');

            imageInput.addEventListener('change', handleImageUpload);
            processBtn.addEventListener('click', processImage);
            downloadBtn.addEventListener('click', downloadResult);
        }

        function setupDragDrop() {
            const dropArea = document.querySelector('.drag-drop-area');
            
            ['dragenter', 'dragover', 'dragleave', 'drop'].forEach(eventName => {
                dropArea.addEventListener(eventName, preventDefaults, false);
            });

            function preventDefaults(e) {
                e.preventDefault();
                e.stopPropagation();
            }

            ['dragenter', 'dragover'].forEach(eventName => {
                dropArea.addEventListener(eventName, highlight, false);
            });

            ['dragleave', 'drop'].forEach(eventName => {
                dropArea.addEventListener(eventName, unhighlight, false);
            });

            function highlight(e) {
                dropArea.classList.add('dragover');
            }

            function unhighlight(e) {
                dropArea.classList.remove('dragover');
            }

            dropArea.addEventListener('drop', handleDrop, false);

            function handleDrop(e) {
                const dt = e.dataTransfer;
                const files = dt.files;
                
                if (files.length > 0) {
                    handleImageFile(files[0]);
                }
            }
        }

        function setupSliders() {
            const sliders = [
                { id: 'resolutionSlider', valueId: 'resolutionValue', suffix: ' پیکسل', property: 'resolution' },
                { id: 'colorSensitivitySlider', valueId: 'colorSensitivityValue', suffix: '%', property: 'colorSensitivity' },
                { id: 'emojiSizeSlider', valueId: 'emojiSizeValue', suffix: 'px', property: 'emojiSize' },
                { id: 'contrastSlider', valueId: 'contrastValue', suffix: '%', property: 'contrast' }
            ];

            sliders.forEach(slider => {
                const element = document.getElementById(slider.id);
                const valueElement = document.getElementById(slider.valueId);
                
                element.addEventListener('input', function() {
                    const value = parseInt(this.value);
                    valueElement.textContent = value + slider.suffix;
                    currentSettings[slider.property] = value;
                });
            });

            // Checkbox listeners
            document.getElementById('ditherCheck').addEventListener('change', function() {
                currentSettings.dithering = this.checked;
            });

            document.getElementById('preserveAspectCheck').addEventListener('change', function() {
                currentSettings.preserveAspect = this.checked;
            });
        }

        function handleImageUpload(event) {
            const file = event.target.files[0];
            if (file) {
                handleImageFile(file);
            }
        }

        function handleImageFile(file) {
            if (!file.type.startsWith('image/')) {
                alert('لطفاً یک فایل عکس انتخاب کنید');
                return;
            }

            if (file.size > 10 * 1024 * 1024) {
                alert('سایز فایل باید کمتر از 10 مگابایت باشد');
                return;
            }

            const reader = new FileReader();
            reader.onload = function(e) {
                const img = new Image();
                img.onload = function() {
                    originalImage = img;
                    displayOriginalImage(img);
                    updateStats();
                    document.getElementById('processBtn').disabled = false;
                };
                img.src = e.target.result;
            };
            reader.readAsDataURL(file);
        }

        function displayOriginalImage(img) {
            const preview = document.getElementById('originalPreview');
            const placeholder = document.getElementById('originalPlaceholder');
            
            preview.src = img.src;
            preview.classList.remove('hidden');
            placeholder.classList.add('hidden');
        }

        function updateStats() {
            if (!originalImage) return;

            document.getElementById('originalSize').textContent = `${originalImage.width}×${originalImage.height}`;
            
            const outputSize = calculateOutputSize(originalImage.width, originalImage.height);
            document.getElementById('processedSize').textContent = `${outputSize.width}×${outputSize.height}`;
            document.getElementById('emojiCount').textContent = (outputSize.width * outputSize.height).toLocaleString();
        }

        function calculateOutputSize(width, height) {
            const maxDimension = currentSettings.resolution;
            
            if (currentSettings.preserveAspect) {
                const aspectRatio = width / height;
                
                if (width > height) {
                    return {
                        width: maxDimension,
                        height: Math.round(maxDimension / aspectRatio)
                    };
                } else {
                    return {
                        width: Math.round(maxDimension * aspectRatio),
                        height: maxDimension
                    };
                }
            } else {
                return {
                    width: maxDimension,
                    height: maxDimension
                };
            }
        }

        async function processImage() {
            if (!originalImage) {
                alert('لطفاً ابتدا یک عکس آپلود کنید');
                return;
            }

            const startTime = Date.now();
            const progressContainer = document.getElementById('progressContainer');
            const progressBar = document.getElementById('progressBar');
            const progressText = document.getElementById('progressText');
            const processBtn = document.getElementById('processBtn');

            // Show progress and disable button
            progressContainer.classList.remove('hidden');
            processBtn.disabled = true;
            processBtn.innerHTML = '<i class="fas fa-spinner fa-spin mr-2"></i>در حال پردازش...';

            try {
                // Update progress
                updateProgress(10, 'آماده‌سازی عکس...');

                // Create canvas for processing
                const canvas = document.createElement('canvas');
                const ctx = canvas.getContext('2d');
                
                const outputSize = calculateOutputSize(originalImage.width, originalImage.height);
                canvas.width = outputSize.width;
                canvas.height = outputSize.height;

                // Apply contrast adjustment
                ctx.filter = `contrast(${currentSettings.contrast}%)`;
                ctx.drawImage(originalImage, 0, 0, canvas.width, canvas.height);

                updateProgress(30, 'تجزیه رنگ‌ها...');

                // Get image data
                const imageData = ctx.getImageData(0, 0, canvas.width, canvas.height);
                
                // Apply dithering if enabled
                if (currentSettings.dithering) {
                    updateProgress(50, 'اعمال Dithering...');
                    await new Promise(resolve => setTimeout(resolve, 100));
                    applyDithering(imageData, canvas.width, canvas.height);
                }

                updateProgress(70, 'تبدیل به ایموجی...');

                // Convert to emoji art
                let result = '';
                const data = imageData.data;
                
                for (let y = 0; y < canvas.height; y++) {
                    for (let x = 0; x < canvas.width; x++) {
                        const idx = (y * canvas.width + x) * 4;
                        const r = data[idx];
                        const g = data[idx + 1];
                        const b = data[idx + 2];
                        
                        const emoji = getClosestEmoji(r, g, b, currentSettings.colorSensitivity);
                        result += emoji;
                    }
                    result += '\n';
                    
                    // Update progress
                    const progress = 70 + (y / canvas.height) * 20;
                    updateProgress(progress, 'تبدیل به ایموجی...');
                    
                    // Allow UI to update
                    if (y % 5 === 0) {
                        await new Promise(resolve => setTimeout(resolve, 1));
                    }
                }

                updateProgress(95, 'نهایی‌سازی...');

                // Display result
                const preview = document.getElementById('emojiPreview');
                preview.innerHTML = '';
                
                const emojiContainer = document.createElement('div');
                emojiContainer.className = 'emoji-output';
                emojiContainer.style.fontSize = `${currentSettings.emojiSize}px`;
                emojiContainer.textContent = result;
                
                preview.appendChild(emojiContainer);

                processedResult = result;
                
                // Update stats
                const processingTime = ((Date.now() - startTime) / 1000).toFixed(1);
                document.getElementById('processTime').textContent = processingTime + 's';
                
                // Enable download
                document.getElementById('downloadBtn').disabled = false;
                
                updateProgress(100, 'تکمیل شد!');
                
                setTimeout(() => {
                    progressContainer.classList.add('hidden');
                    processBtn.disabled = false;
                    processBtn.innerHTML = '<i class="fas fa-magic mr-2"></i>شروع تبدیل';
                }, 1000);

            } catch (error) {
                console.error('خطا در پردازش:', error);
                alert('خطا در پردازش عکس. لطفاً مجدداً تلاش کنید.');
                
                progressContainer.classList.add('hidden');
                processBtn.disabled = false;
                processBtn.innerHTML = '<i class="fas fa-magic mr-2"></i>شروع تبدیل';
            }
        }

        function updateProgress(percentage, message) {
            const progressBar = document.getElementById('progressBar');
            const progressText = document.getElementById('progressText');
            
            progressBar.style.width = `${percentage}%`;
            progressText.textContent = `${Math.round(percentage)}%`;
            
            if (message) {
                progressText.textContent += ` - ${message}`;
            }
        }

        function downloadResult() {
            if (!processedResult) {
                alert('هیچ نتیجه‌ای برای دانلود موجود نیست');
                return;
            }

            const blob = new Blob([processedResult], { type: 'text/plain;charset=utf-8' });
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = `emoji-art-${Date.now()}.txt`;
            document.body.appendChild(a);
            a.click();
            document.body.removeChild(a);
            URL.revokeObjectURL(url);
        }

        // Update stats when settings change
        document.getElementById('resolutionSlider').addEventListener('input', updateStats);
        document.getElementById('preserveAspectCheck').addEventListener('change', updateStats);
    </script>
</body>
</html>
