<!DOCTYPE html>
<html lang="fa" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ØªØ¨Ø¯ÛŒÙ„ Ø¹Ú©Ø³ Ø¨Ù‡ Ø§ÛŒÙ…ÙˆØ¬ÛŒ - Ø¯Ù‚Øª Ø¨Ø§Ù„Ø§</title>
    <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.4.0/css/all.min.css">
    <style>
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
        }
        .glass-effect {
            backdrop-filter: blur(10px);
            background: rgba(255, 255, 255, 0.1);
            border: 1px solid rgba(255, 255, 255, 0.2);
        }
        .emoji-output {
            font-family: 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji', sans-serif;
            line-height: 1;
            letter-spacing: 0;
            word-spacing: 0;
            white-space: pre-wrap;
            overflow-wrap: break-word;
        }
        .drag-drop-area {
            border: 2px dashed #d1d5db;
            border-radius: 10px;
            transition: all 0.3s ease;
        }
        .drag-drop-area:hover {
            border-color: #3b82f6;
            background-color: rgba(59, 130, 246, 0.1);
        }
        .drag-drop-area.dragover {
            border-color: #10b981;
            background-color: rgba(16, 185, 129, 0.1);
        }
        .progress-bar {
            transition: width 0.3s ease;
        }
        .control-panel {
            background: rgba(255, 255, 255, 0.95);
            border-radius: 15px;
            padding: 20px;
            margin: 10px 0;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1);
        }
        .emoji-preview {
            max-height: 70vh;
            overflow: auto;
            border: 2px solid #e5e7eb;
            border-radius: 10px;
            padding: 10px;
            background: white;
            font-size: 12px;
        }
        .slider-container {
            margin: 15px 0;
        }
        .slider-label {
            font-weight: 600;
            color: #374151;
            margin-bottom: 5px;
        }
        .custom-slider {
            width: 100%;
            height: 6px;
            border-radius: 3px;
            background: #e5e7eb;
            outline: none;
            -webkit-appearance: none;
        }
        .custom-slider::-webkit-slider-thumb {
            -webkit-appearance: none;
            appearance: none;
            width: 20px;
            height: 20px;
            border-radius: 50%;
            background: #3b82f6;
            cursor: pointer;
            box-shadow: 0 2px 8px rgba(59, 130, 246, 0.3);
        }
        .custom-slider::-moz-range-thumb {
            width: 20px;
            height: 20px;
            border-radius: 50%;
            background: #3b82f6;
            cursor: pointer;
            border: none;
            box-shadow: 0 2px 8px rgba(59, 130, 246, 0.3);
        }
        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(120px, 1fr));
            gap: 15px;
            margin: 20px 0;
        }
        .stat-card {
            background: white;
            padding: 15px;
            border-radius: 10px;
            text-align: center;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
        }
        .stat-value {
            font-size: 24px;
            font-weight: bold;
            color: #3b82f6;
        }
        .stat-label {
            font-size: 12px;
            color: #6b7280;
            margin-top: 5px;
        }
    </style>
</head>
<body class="min-h-screen p-4">
    <div class="max-w-6xl mx-auto">
        <!-- Header -->
        <div class="text-center mb-8">
            <h1 class="text-4xl font-bold text-white mb-2">
                <i class="fas fa-image mr-3"></i>
                ØªØ¨Ø¯ÛŒÙ„ Ø¹Ú©Ø³ Ø¨Ù‡ Ø§ÛŒÙ…ÙˆØ¬ÛŒ
            </h1>
            <p class="text-white opacity-90">Ø¨Ø§ Ø¯Ù‚Øª ÙÙˆÙ‚â€ŒØ§Ù„Ø¹Ø§Ø¯Ù‡ Ø¨Ø§Ù„Ø§ Ùˆ Ø­ÙØ¸ Ø¬Ø²Ø¦ÛŒØ§Øª</p>
        </div>

        <!-- Main Container -->
        <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
            <!-- Left Panel - Controls -->
            <div class="space-y-4">
                <!-- Upload Area -->
                <div class="control-panel">
                    <h3 class="text-lg font-semibold mb-4 flex items-center">
                        <i class="fas fa-cloud-upload-alt mr-2 text-blue-500"></i>
                        Ø¢Ù¾Ù„ÙˆØ¯ Ø¹Ú©Ø³
                    </h3>
                    <div class="drag-drop-area p-8 text-center cursor-pointer" onclick="document.getElementById('imageInput').click()">
                        <i class="fas fa-cloud-upload-alt text-4xl text-gray-400 mb-4"></i>
                        <p class="text-gray-600 mb-2">ÙØ§ÛŒÙ„ Ø±Ø§ Ø§ÛŒÙ†Ø¬Ø§ Ø±Ù‡Ø§ Ú©Ù†ÛŒØ¯ ÛŒØ§ Ú©Ù„ÛŒÚ© Ú©Ù†ÛŒØ¯</p>
                        <p class="text-sm text-gray-500">JPG, PNG, GIF ØªØ§ 10MB</p>
                        <input type="file" id="imageInput" accept="image/*" class="hidden">
                    </div>
                </div>

                <!-- Settings Panel -->
                <div class="control-panel">
                    <h3 class="text-lg font-semibold mb-4 flex items-center">
                        <i class="fas fa-cog mr-2 text-green-500"></i>
                        ØªÙ†Ø¸ÛŒÙ…Ø§Øª Ø¯Ù‚Øª
                    </h3>
                    
                    <div class="slider-container">
                        <div class="slider-label">Ø±Ø²ÙˆÙ„ÙˆØ´Ù† Ø®Ø±ÙˆØ¬ÛŒ: <span id="resolutionValue">50</span> Ù¾ÛŒÚ©Ø³Ù„</div>
                        <input type="range" id="resolutionSlider" min="20" max="150" value="50" class="custom-slider">
                    </div>

                    <div class="slider-container">
                        <div class="slider-label">Ø­Ø³Ø§Ø³ÛŒØª Ø±Ù†Ú¯: <span id="colorSensitivityValue">80</span>%</div>
                        <input type="range" id="colorSensitivitySlider" min="50" max="100" value="80" class="custom-slider">
                    </div>

                    <div class="slider-container">
                        <div class="slider-label">Ø³Ø§ÛŒØ² Ø§ÛŒÙ…ÙˆØ¬ÛŒ: <span id="emojiSizeValue">16</span>px</div>
                        <input type="range" id="emojiSizeSlider" min="8" max="24" value="16" class="custom-slider">
                    </div>

                    <div class="slider-container">
                        <div class="slider-label">Ú©Ù†ØªØ±Ø§Ø³Øª: <span id="contrastValue">100</span>%</div>
                        <input type="range" id="contrastSlider" min="50" max="200" value="100" class="custom-slider">
                    </div>

                    <div class="flex items-center justify-between mt-4">
                        <label class="flex items-center">
                            <input type="checkbox" id="ditherCheck" class="mr-2">
                            <span>ÙØ¹Ø§Ù„â€ŒØ³Ø§Ø²ÛŒ Dithering</span>
                        </label>
                        <label class="flex items-center">
                            <input type="checkbox" id="preserveAspectCheck" checked class="mr-2">
                            <span>Ø­ÙØ¸ Ù†Ø³Ø¨Øª Ø§Ø¨Ø¹Ø§Ø¯</span>
                        </label>
                    </div>
                </div>

                <!-- Process Button -->
                <div class="control-panel">
                    <button id="processBtn" class="w-full bg-blue-500 hover:bg-blue-600 text-white font-semibold py-3 px-6 rounded-lg transition-colors duration-200 flex items-center justify-center">
                        <i class="fas fa-magic mr-2"></i>
                        Ø´Ø±ÙˆØ¹ ØªØ¨Ø¯ÛŒÙ„
                    </button>
                    <div id="progressContainer" class="mt-4 hidden">
                        <div class="flex justify-between text-sm text-gray-600 mb-2">
                            <span>Ù¾ÛŒØ´Ø±ÙØª:</span>
                            <span id="progressText">0%</span>
                        </div>
                        <div class="w-full bg-gray-200 rounded-full h-2">
                            <div id="progressBar" class="bg-blue-500 h-2 rounded-full progress-bar" style="width: 0%"></div>
                        </div>
                    </div>
                </div>

                <!-- Stats -->
                <div class="control-panel">
                    <h3 class="text-lg font-semibold mb-4 flex items-center">
                        <i class="fas fa-chart-bar mr-2 text-purple-500"></i>
                        Ø¢Ù…Ø§Ø± Ù¾Ø±Ø¯Ø§Ø²Ø´
                    </h3>
                    <div class="stats-grid">
                        <div class="stat-card">
                            <div class="stat-value" id="originalSize">-</div>
                            <div class="stat-label">Ø³Ø§ÛŒØ² Ø§ØµÙ„ÛŒ</div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-value" id="processedSize">-</div>
                            <div class="stat-label">Ø³Ø§ÛŒØ² Ø®Ø±ÙˆØ¬ÛŒ</div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-value" id="emojiCount">-</div>
                            <div class="stat-label">ØªØ¹Ø¯Ø§Ø¯ Ø§ÛŒÙ…ÙˆØ¬ÛŒ</div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-value" id="processTime">-</div>
                            <div class="stat-label">Ø²Ù…Ø§Ù† Ù¾Ø±Ø¯Ø§Ø²Ø´</div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Right Panel - Preview -->
            <div class="space-y-4">
                <!-- Original Image Preview -->
                <div class="control-panel">
                    <h3 class="text-lg font-semibold mb-4 flex items-center">
                        <i class="fas fa-image mr-2 text-red-500"></i>
                        Ø¹Ú©Ø³ Ø§ØµÙ„ÛŒ
                    </h3>
                    <div class="bg-gray-100 rounded-lg p-4 text-center min-h-48 flex items-center justify-center">
                        <canvas id="originalCanvas" class="hidden"></canvas>
                        <img id="originalPreview" class="max-w-full max-h-64 rounded-lg hidden">
                        <div id="originalPlaceholder" class="text-gray-500">
                            <i class="fas fa-image text-4xl mb-2"></i>
                            <p>Ø¹Ú©Ø³ Ø¢Ù¾Ù„ÙˆØ¯ Ù†Ø´Ø¯Ù‡</p>
                        </div>
                    </div>
                </div>

                <!-- Emoji Art Preview -->
                <div class="control-panel">
                    <h3 class="text-lg font-semibold mb-4 flex items-center">
                        <i class="fas fa-palette mr-2 text-yellow-500"></i>
                        Ù†ØªÛŒØ¬Ù‡ Ø§ÛŒÙ…ÙˆØ¬ÛŒ
                    </h3>
                    <div class="emoji-preview" id="emojiPreview">
                        <div class="text-center text-gray-500 p-8">
                            <i class="fas fa-magic text-4xl mb-2"></i>
                            <p>Ø¯Ø± Ø§Ù†ØªØ¸Ø§Ø± Ù¾Ø±Ø¯Ø§Ø²Ø´...</p>
                        </div>
                    </div>
                </div>

                <!-- Download Button -->
                <div class="control-panel">
                    <button id="downloadBtn" class="w-full bg-green-500 hover:bg-green-600 text-white font-semibold py-3 px-6 rounded-lg transition-colors duration-200 flex items-center justify-center disabled:opacity-50 disabled:cursor-not-allowed" disabled>
                        <i class="fas fa-download mr-2"></i>
                        Ø¯Ø§Ù†Ù„ÙˆØ¯ Ù†ØªÛŒØ¬Ù‡
                    </button>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Extended emoji palette with color mapping
        const EMOJI_PALETTE = {
            // Faces and skin tones
            'ğŸ˜€': [255, 220, 93], 'ğŸ˜ƒ': [255, 225, 95], 'ğŸ˜„': [255, 215, 85], 'ğŸ˜': [255, 210, 80],
            'ğŸ˜Š': [255, 200, 100], 'ğŸ˜‡': [255, 255, 255], 'ğŸ™‚': [255, 235, 150], 'ğŸ˜‰': [255, 225, 120],
            'ğŸ˜‹': [255, 190, 110], 'ğŸ˜': [80, 80, 80], 'ğŸ˜': [255, 150, 150], 'ğŸ˜˜': [255, 180, 180],
            'ğŸ˜—': [255, 200, 180], 'ğŸ˜™': [255, 210, 190], 'ğŸ˜š': [255, 205, 185], 'ğŸ˜œ': [255, 195, 120],
            'ğŸ˜': [255, 185, 100], 'ğŸ˜›': [255, 175, 90], 'ğŸ¤‘': [255, 255, 0], 'ğŸ¤—': [255, 200, 120],
            'ğŸ¤”': [255, 215, 130], 'ğŸ¤': [240, 200, 140], 'ğŸ¤¨': [250, 210, 130], 'ğŸ˜': [240, 215, 140],
            'ğŸ˜‘': [235, 210, 135], 'ğŸ˜¶': [245, 220, 145], 'ğŸ˜': [255, 205, 125], 'ğŸ˜’': [230, 200, 130],
            'ğŸ™„': [245, 215, 135], 'ğŸ˜¬': [255, 255, 255], 'ğŸ¤¥': [255, 180, 140], 'ğŸ˜Œ': [255, 210, 160],
            'ğŸ˜”': [200, 180, 140], 'ğŸ˜ª': [220, 200, 160], 'ğŸ¤¤': [255, 220, 180], 'ğŸ˜´': [240, 220, 180],
            'ğŸ˜·': [255, 255, 255], 'ğŸ¤’': [255, 150, 150], 'ğŸ¤•': [255, 200, 200], 'ğŸ¤¢': [150, 200, 100],
            'ğŸ¤®': [100, 180, 80], 'ğŸ¤§': [255, 200, 200], 'ğŸ¥µ': [255, 100, 100], 'ğŸ¥¶': [150, 200, 255],
            'ğŸ¥´': [200, 150, 200], 'ğŸ˜µ': [180, 180, 180], 'ğŸ¤¯': [255, 150, 100], 'ğŸ¤ ': [200, 150, 100],
            'ğŸ¥³': [255, 200, 150], 'ğŸ˜': [50, 50, 50], 'ğŸ¤“': [200, 200, 200], 'ğŸ§': [255, 220, 180],
            
            // Hearts and emotions
            'â¤ï¸': [255, 0, 0], 'ğŸ§¡': [255, 165, 0], 'ğŸ’›': [255, 255, 0], 'ğŸ’š': [0, 255, 0],
            'ğŸ’™': [0, 0, 255], 'ğŸ’œ': [128, 0, 128], 'ğŸ–¤': [0, 0, 0], 'ğŸ¤': [255, 255, 255],
            'ğŸ¤': [139, 69, 19], 'ğŸ’”': [200, 0, 0], 'â£ï¸': [255, 100, 100], 'ğŸ’•': [255, 150, 150],
            'ğŸ’–': [255, 192, 203], 'ğŸ’—': [255, 182, 193], 'ğŸ’˜': [255, 20, 147], 'ğŸ’': [255, 105, 180],
            'ğŸ’': [255, 160, 200], 'ğŸ’Ÿ': [255, 140, 180], 'ğŸ’¢': [255, 0, 0], 'ğŸ’¥': [255, 165, 0],
            'ğŸ’«': [255, 255, 0], 'ğŸ’¦': [0, 191, 255], 'ğŸ’¨': [220, 220, 220], 'ğŸ’­': [245, 245, 245],
            'ğŸ’¬': [255, 255, 255], 'ğŸ’¯': [255, 0, 0], 'ğŸ’¢': [255, 69, 0], 'ğŸ’£': [0, 0, 0],
            'ğŸ’¤': [173, 216, 230], 'ğŸ•³ï¸': [0, 0, 0], 'ğŸ’Š': [255, 255, 255], 'ğŸ©¹': [255, 228, 196],
            
            // Nature and weather
            'ğŸŒ': [255, 255, 0], 'ğŸŒ': [255, 255, 0], 'ğŸŒ›': [255, 255, 220], 'ğŸŒœ': [255, 255, 200],
            'ğŸŒš': [50, 50, 50], 'ğŸŒ•': [255, 255, 255], 'ğŸŒ–': [200, 200, 200], 'ğŸŒ—': [150, 150, 150],
            'ğŸŒ˜': [100, 100, 100], 'ğŸŒ‘': [50, 50, 50], 'ğŸŒ’': [80, 80, 80], 'ğŸŒ“': [120, 120, 120],
            'ğŸŒ”': [180, 180, 180], 'ğŸŒ™': [255, 255, 200], 'â­': [255, 255, 0], 'ğŸŒŸ': [255, 255, 100],
            'ğŸ’«': [255, 255, 150], 'âœ¨': [255, 255, 200], 'â˜€ï¸': [255, 255, 0], 'ğŸŒ¤ï¸': [255, 255, 150],
            'â›…': [255, 255, 255], 'ğŸŒ¥ï¸': [200, 200, 200], 'â˜ï¸': [220, 220, 220], 'ğŸŒ¦ï¸': [180, 180, 200],
            'ğŸŒ§ï¸': [100, 100, 150], 'â›ˆï¸': [50, 50, 100], 'ğŸŒ©ï¸': [80, 80, 120], 'ğŸŒ¨ï¸': [255, 255, 255],
            'â„ï¸': [255, 255, 255], 'â˜ƒï¸': [255, 255, 255], 'â›„': [255, 255, 255], 'ğŸŒ¬ï¸': [200, 200, 255],
            'ğŸ’¨': [220, 220, 220], 'ğŸŒªï¸': [150, 150, 150], 'ğŸŒˆ': [255, 100, 100], 'ğŸ”¥': [255, 69, 0],
            'ğŸ’§': [0, 191, 255], 'ğŸŒŠ': [0, 100, 200], 'ğŸ”ï¸': [150, 150, 150], 'ğŸ•ï¸': [100, 150, 50],
            'ğŸ–ï¸': [255, 228, 181], 'ğŸœï¸': [255, 218, 185], 'ğŸï¸': [100, 200, 100], 'ğŸŸï¸': [100, 150, 50],
            
            // Animals
            'ğŸ¶': [139, 69, 19], 'ğŸ±': [255, 165, 0], 'ğŸ­': [169, 169, 169], 'ğŸ¹': [255, 215, 0],
            'ğŸ°': [255, 255, 255], 'ğŸ¦Š': [255, 140, 0], 'ğŸ»': [139, 69, 19], 'ğŸ¼': [255, 255, 255],
            'ğŸ¨': [169, 169, 169], 'ğŸ¯': [255, 140, 0], 'ğŸ¦': [255, 215, 0], 'ğŸ®': [255, 255, 255],
            'ğŸ·': [255, 192, 203], 'ğŸ½': [255, 182, 193], 'ğŸ¸': [0, 255, 0], 'ğŸµ': [139, 69, 19],
            'ğŸ™ˆ': [139, 69, 19], 'ğŸ™‰': [139, 69, 19], 'ğŸ™Š': [139, 69, 19], 'ğŸ’': [139, 69, 19],
            'ğŸ”': [255, 255, 255], 'ğŸ§': [255, 255, 255], 'ğŸ¦': [135, 206, 235], 'ğŸ¤': [255, 255, 0],
            'ğŸ£': [255, 255, 0], 'ğŸ¥': [255, 255, 0], 'ğŸ¦†': [255, 255, 0], 'ğŸ¦…': [139, 69, 19],
            'ğŸ¦‰': [139, 69, 19], 'ğŸ¦‡': [0, 0, 0], 'ğŸº': [169, 169, 169], 'ğŸ—': [139, 69, 19],
            'ğŸ´': [139, 69, 19], 'ğŸ¦„': [255, 255, 255], 'ğŸ': [255, 215, 0], 'ğŸ›': [0, 255, 0],
            'ğŸ¦‹': [255, 140, 0], 'ğŸŒ': [139, 69, 19], 'ğŸ': [255, 0, 0], 'ğŸœ': [0, 0, 0],
            'ğŸ¦—': [0, 255, 0], 'ğŸ•·ï¸': [0, 0, 0], 'ğŸ¦‚': [139, 69, 19], 'ğŸ¢': [0, 128, 0],
            'ğŸ': [0, 255, 0], 'ğŸ¦': [0, 255, 0], 'ğŸ™': [255, 69, 0], 'ğŸ¦‘': [255, 69, 0],
            'ğŸ¦': [255, 69, 0], 'ğŸ¦': [255, 0, 0], 'ğŸ¦€': [255, 0, 0], 'ğŸ¡': [255, 255, 0],
            'ğŸ ': [0, 100, 255], 'ğŸŸ': [169, 169, 169], 'ğŸ¬': [169, 169, 169], 'ğŸ³': [169, 169, 169],
            'ğŸ‹': [0, 0, 139], 'ğŸ¦ˆ': [169, 169, 169], 'ğŸŠ': [0, 128, 0], 'ğŸ…': [255, 140, 0],
            'ğŸ†': [255, 215, 0], 'ğŸ¦“': [255, 255, 255], 'ğŸ¦': [0, 0, 0], 'ğŸ¦§': [139, 69, 19],
            'ğŸ˜': [169, 169, 169], 'ğŸ¦': [169, 169, 169], 'ğŸ¦›': [169, 169, 169], 'ğŸª': [139, 69, 19],
            'ğŸ«': [139, 69, 19], 'ğŸ¦’': [255, 215, 0], 'ğŸƒ': [139, 69, 19], 'ğŸ‚': [139, 69, 19],
            'ğŸ„': [255, 255, 255], 'ğŸ': [139, 69, 19], 'ğŸ–': [255, 192, 203], 'ğŸ': [255, 255, 255],
            'ğŸ‘': [255, 255, 255], 'ğŸ': [255, 255, 255], 'ğŸ¦Œ': [139, 69, 19], 'ğŸ•': [139, 69, 19],
            'ğŸ©': [255, 255, 255], 'ğŸˆ': [255, 165, 0], 'ğŸ“': [255, 255, 255], 'ğŸ¦ƒ': [139, 69, 19],
            'ğŸ•Šï¸': [255, 255, 255], 'ğŸ‡': [255, 255, 255], 'ğŸ': [169, 169, 169], 'ğŸ€': [169, 169, 169],
            'ğŸ¿ï¸': [139, 69, 19], 'ğŸ¦”': [139, 69, 19], 'ğŸ¾': [139, 69, 19], 'ğŸ‰': [0, 255, 0],
            'ğŸ²': [0, 255, 0], 'ğŸŒµ': [0, 128, 0], 'ğŸ„': [0, 128, 0], 'ğŸŒ²': [0, 128, 0],
            'ğŸŒ³': [0, 128, 0], 'ğŸŒ´': [0, 128, 0], 'ğŸŒ±': [0, 255, 0], 'ğŸŒ¿': [0, 255, 0],
            'â˜˜ï¸': [0, 255, 0], 'ğŸ€': [0, 255, 0], 'ğŸ‹': [0, 255, 0], 'ğŸƒ': [0, 255, 0],
            
            // Food and objects
            'ğŸ': [255, 0, 0], 'ğŸŠ': [255, 165, 0], 'ğŸ‹': [255, 255, 0], 'ğŸŒ': [255, 255, 0],
            'ğŸ‰': [255, 0, 0], 'ğŸ‡': [128, 0, 128], 'ğŸ“': [255, 0, 0], 'ğŸˆ': [255, 215, 0],
            'ğŸ’': [255, 0, 0], 'ğŸ‘': [255, 218, 185], 'ğŸ': [255, 215, 0], 'ğŸ¥­': [255, 165, 0],
            'ğŸ…': [255, 0, 0], 'ğŸ†': [128, 0, 128], 'ğŸ¥‘': [0, 128, 0], 'ğŸ¥¦': [0, 128, 0],
            'ğŸ¥¬': [0, 255, 0], 'ğŸ¥’': [0, 255, 0], 'ğŸŒ¶ï¸': [255, 0, 0], 'ğŸŒ½': [255, 255, 0],
            'ğŸ¥•': [255, 165, 0], 'ğŸ¥”': [139, 69, 19], 'ğŸ ': [255, 140, 0], 'ğŸ¥': [255, 215, 0],
            'ğŸ': [255, 228, 181], 'ğŸ¥–': [255, 228, 181], 'ğŸ¥¨': [139, 69, 19], 'ğŸ¥¯': [255, 228, 181],
            'ğŸ§€': [255, 255, 0], 'ğŸ¥š': [255, 255, 255], 'ğŸ³': [255, 255, 255], 'ğŸ¥': [255, 215, 0],
            'ğŸ¥“': [255, 0, 0], 'ğŸ—': [255, 215, 0], 'ğŸ–': [255, 0, 0], 'ğŸŒ­': [255, 165, 0],
            'ğŸ”': [255, 215, 0], 'ğŸŸ': [255, 215, 0], 'ğŸ•': [255, 215, 0], 'ğŸ¥ª': [255, 228, 181],
            'ğŸ¥™': [255, 228, 181], 'ğŸŒ®': [255, 215, 0], 'ğŸŒ¯': [255, 228, 181], 'ğŸ¥—': [0, 255, 0],
            'ğŸ¥˜': [255, 165, 0], 'ğŸ': [255, 215, 0], 'ğŸœ': [255, 215, 0], 'ğŸ²': [255, 165, 0],
            'ğŸ›': [255, 255, 255], 'ğŸ£': [255, 255, 255], 'ğŸ±': [255, 255, 255], 'ğŸ¥Ÿ': [255, 255, 255],
            'ğŸ¤': [255, 0, 0], 'ğŸ™': [255, 255, 255], 'ğŸš': [255, 255, 255], 'ğŸ˜': [255, 255, 255],
            'ğŸ¥': [255, 255, 255], 'ğŸ¥ ': [255, 228, 181], 'ğŸ¢': [255, 228, 181], 'ğŸ¡': [255, 255, 255],
            'ğŸ§': [255, 255, 255], 'ğŸ¨': [255, 255, 255], 'ğŸ¦': [255, 255, 255], 'ğŸ¥§': [255, 228, 181],
            'ğŸ°': [255, 255, 255], 'ğŸ‚': [255, 255, 255], 'ğŸ§': [255, 192, 203], 'ğŸ­': [255, 0, 0],
            'ğŸ¬': [255, 255, 255], 'ğŸ«': [139, 69, 19], 'ğŸ¿': [255, 255, 255], 'ğŸ©': [255, 215, 0],
            'ğŸª': [255, 228, 181], 'ğŸŒ°': [139, 69, 19], 'ğŸ¥œ': [139, 69, 19], 'ğŸ¯': [255, 215, 0],
            'ğŸ¥›': [255, 255, 255], 'ğŸ¼': [255, 255, 255], 'â˜•': [139, 69, 19], 'ğŸµ': [0, 255, 0],
            'ğŸ¥¤': [255, 255, 255], 'ğŸ¶': [255, 255, 255], 'ğŸº': [255, 215, 0], 'ğŸ»': [255, 215, 0],
            'ğŸ¥‚': [255, 255, 255], 'ğŸ·': [128, 0, 128], 'ğŸ¥ƒ': [255, 215, 0], 'ğŸ¸': [255, 192, 203],
            'ğŸ¹': [255, 165, 0], 'ğŸ¾': [0, 255, 0], 'ğŸ¥„': [192, 192, 192], 'ğŸ´': [192, 192, 192],
            'ğŸ¥¢': [139, 69, 19], 'ğŸº': [139, 69, 19], 'ğŸŒ': [0, 0, 255], 'ğŸŒ': [0, 255, 0],
            'ğŸŒ': [255, 255, 0], 'ğŸŒ': [0, 0, 255], 'ğŸ—ºï¸': [255, 228, 181], 'ğŸ”ï¸': [169, 169, 169],
            'â›°ï¸': [139, 69, 19], 'ğŸŒ‹': [255, 0, 0], 'ğŸ—»': [255, 255, 255], 'ğŸ•ï¸': [0, 128, 0],
            'ğŸ–ï¸': [255, 228, 181], 'ğŸœï¸': [255, 218, 185], 'ğŸï¸': [0, 255, 0], 'ğŸï¸': [0, 128, 0],
            'ğŸŸï¸': [0, 128, 0], 'ğŸ›ï¸': [255, 255, 255], 'ğŸ—ï¸': [255, 165, 0], 'ğŸ˜ï¸': [255, 228, 181],
            'ğŸšï¸': [139, 69, 19], 'ğŸ ': [255, 0, 0], 'ğŸ¡': [255, 0, 0], 'ğŸ¢': [169, 169, 169],
            'ğŸ£': [169, 169, 169], 'ğŸ¤': [255, 0, 0], 'ğŸ¥': [255, 255, 255], 'ğŸ¦': [169, 169, 169],
            'ğŸ§': [0, 0, 255], 'ğŸ¨': [255, 255, 255], 'ğŸ©': [255, 192, 203], 'ğŸª': [255, 165, 0],
            'ğŸ«': [255, 255, 255], 'ğŸ¬': [255, 255, 255], 'ğŸ­': [169, 169, 169], 'ğŸ®': [255, 0, 0],
            'ğŸ¯': [255, 215, 0], 'ğŸ°': [169, 169, 169], 'ğŸ—¼': [255, 0, 0], 'ğŸ—½': [0, 255, 0],
            'â›ª': [255, 255, 255], 'ğŸ•Œ': [255, 215, 0], 'ğŸ•': [255, 255, 255], 'â›©ï¸': [255, 0, 0],
            'ğŸ•‹': [0, 0, 0], 'â›²': [255, 255, 255], 'â›º': [255, 165, 0], 'ğŸŒ': [169, 169, 169],
            'ğŸŒƒ': [0, 0, 139], 'ğŸ™ï¸': [169, 169, 169], 'ğŸŒ„': [255, 215, 0], 'ğŸŒ…': [255, 165, 0],
            'ğŸŒ†': [255, 140, 0], 'ğŸŒ‡': [255, 69, 0], 'ğŸŒ‰': [255, 215, 0], 'â™¨ï¸': [255, 255, 255],
            'ğŸ ': [255, 192, 203], 'ğŸ¡': [255, 255, 255], 'ğŸ¢': [255, 0, 0], 'ğŸ’ˆ': [255, 0, 0],
            'ğŸª': [255, 255, 255], 'ğŸš‚': [0, 0, 139], 'ğŸšƒ': [255, 215, 0], 'ğŸš„': [255, 255, 255],
            'ğŸš…': [255, 255, 255], 'ğŸš†': [255, 255, 255], 'ğŸš‡': [255, 255, 255], 'ğŸšˆ': [255, 255, 255],
            'ğŸš‰': [255, 255, 255], 'ğŸšŠ': [255, 255, 255], 'ğŸš': [255, 255, 255], 'ğŸš': [255, 255, 255],
            'ğŸš‹': [255, 255, 255], 'ğŸšŒ': [255, 255, 0], 'ğŸš': [255, 255, 0], 'ğŸš': [255, 255, 0],
            'ğŸš': [255, 255, 255], 'ğŸš‘': [255, 255, 255], 'ğŸš’': [255, 0, 0], 'ğŸš“': [255, 255, 255],
            'ğŸš”': [255, 255, 255], 'ğŸš•': [255, 255, 0], 'ğŸš–': [255, 255, 0], 'ğŸš—': [255, 0, 0],
            'ğŸš˜': [255, 0, 0], 'ğŸš™': [255, 0, 0], 'ğŸšš': [255, 255, 255], 'ğŸš›': [255, 255, 255],
            'ğŸšœ': [255, 255, 0], 'ğŸï¸': [255, 0, 0], 'ğŸï¸': [255, 0, 0], 'ğŸ›µ': [255, 255, 255],
            'ğŸš²': [255, 0, 0], 'ğŸ›´': [255, 255, 255], 'ğŸ›¹': [255, 165, 0], 'ğŸš': [255, 255, 255],
            'ğŸšŸ': [255, 255, 255], 'ğŸš ': [255, 255, 255], 'ğŸš¡': [255, 255, 255], 'ğŸ›°ï¸': [192, 192, 192],
            'ğŸš€': [255, 255, 255], 'ğŸ›¸': [192, 192, 192], 'ğŸ›ï¸': [255, 215, 0], 'ğŸ§³': [139, 69, 19],
            'âŒ›': [255, 215, 0], 'â³': [255, 215, 0], 'âŒš': [0, 0, 0], 'â°': [255, 255, 255],
            'â±ï¸': [255, 255, 255], 'â²ï¸': [255, 255, 255], 'ğŸ•°ï¸': [139, 69, 19], 'ğŸ•›': [255, 255, 255],
            'ğŸ•§': [255, 255, 255], 'ğŸ•': [255, 255, 255], 'ğŸ•œ': [255, 255, 255], 'ğŸ•‘': [255, 255, 255],
            'ğŸ•': [255, 255, 255], 'ğŸ•’': [255, 255, 255], 'ğŸ•': [255, 255, 255], 'ğŸ•“': [255, 255, 255],
            'ğŸ•Ÿ': [255, 255, 255], 'ğŸ•”': [255, 255, 255], 'ğŸ• ': [255, 255, 255], 'ğŸ••': [255, 255, 255],
            'ğŸ•¡': [255, 255, 255], 'ğŸ•–': [255, 255, 255], 'ğŸ•¢': [255, 255, 255], 'ğŸ•—': [255, 255, 255],
            'ğŸ•£': [255, 255, 255], 'ğŸ•˜': [255, 255, 255], 'ğŸ•¤': [255, 255, 255], 'ğŸ•™': [255, 255, 255],
            'ğŸ•¥': [255, 255, 255], 'ğŸ•š': [255, 255, 255], 'ğŸ•¦': [255, 255, 255], 'ğŸŒ‘': [0, 0, 0],
            'ğŸŒ’': [50, 50, 50], 'ğŸŒ“': [100, 100, 100], 'ğŸŒ”': [150, 150, 150], 'ğŸŒ•': [255, 255, 255],
            'ğŸŒ–': [200, 200, 200], 'ğŸŒ—': [150, 150, 150], 'ğŸŒ˜': [100, 100, 100], 'ğŸŒ™': [255, 255, 200],
            'ğŸŒš': [50, 50, 50], 'ğŸŒ›': [255, 255, 220], 'ğŸŒœ': [255, 255, 200], 'ğŸŒ': [255, 255, 0],
            'ğŸŒ': [255, 255, 0], 'â­': [255, 255, 0], 'ğŸŒŸ': [255, 255, 100], 'ğŸ’«': [255, 255, 150],
            'âœ¨': [255, 255, 200], 'â˜„ï¸': [255, 165, 0], 'â˜€ï¸': [255, 255, 0], 'ğŸŒ¤ï¸': [255, 255, 150],
            'â›…': [255, 255, 255], 'ğŸŒ¥ï¸': [200, 200, 200], 'â˜ï¸': [220, 220, 220], 'ğŸŒ¦ï¸': [180, 180, 200],
            'ğŸŒ§ï¸': [100, 100, 150], 'â›ˆï¸': [50, 50, 100], 'ğŸŒ©ï¸': [80, 80, 120], 'ğŸŒ¨ï¸': [255, 255, 255],
            'â„ï¸': [255, 255, 255], 'â˜ƒï¸': [255, 255, 255], 'â›„': [255, 255, 255], 'ğŸŒ¬ï¸': [200, 200, 255],
            'ğŸ’¨': [220, 220, 220], 'ğŸŒªï¸': [150, 150, 150], 'ğŸŒˆ': [255, 100, 100], 'ğŸ”¥': [255, 69, 0],
            'ğŸ’§': [0, 191, 255], 'ğŸŒŠ': [0, 100, 200], 'âš¡': [255, 255, 0], 'ğŸ”†': [255, 255, 0],
            'ğŸ”…': [255, 255, 200], 'ğŸ’¡': [255, 255, 0], 'ğŸ”¦': [255, 255, 255], 'ğŸ®': [255, 0, 0],
            'ğŸª”': [255, 165, 0], 'ğŸ•¯ï¸': [255, 255, 0], 'ğŸ§¯': [255, 0, 0], 'ğŸ›¢ï¸': [0, 0, 0],
            'ğŸ’¸': [0, 255, 0], 'ğŸ’µ': [0, 255, 0], 'ğŸ’´': [255, 255, 0], 'ğŸ’¶': [255, 165, 0],
            'ğŸ’·': [128, 0, 128], 'ğŸ’°': [255, 215, 0], 'ğŸ’³': [255, 255, 255], 'ğŸ§¾': [255, 255, 255],
            'ğŸ’': [0, 191, 255], 'âš–ï¸': [255, 215, 0], 'ğŸ§°': [255, 0, 0], 'ğŸ”§': [192, 192, 192],
            'ğŸ”¨': [139, 69, 19], 'âš’ï¸': [192, 192, 192], 'ğŸ› ï¸': [192, 192, 192], 'â›ï¸': [139, 69, 19],
            'ğŸ”©': [192, 192, 192], 'âš™ï¸': [192, 192, 192], 'ğŸ§±': [255, 0, 0], 'â›“ï¸': [192, 192, 192],
            'ğŸ§²': [255, 0, 0], 'ğŸ”«': [0, 0, 0], 'ğŸ’£': [0, 0, 0], 'ğŸ§¨': [255, 0, 0],
            'ğŸ”ª': [192, 192, 192], 'ğŸ—¡ï¸': [192, 192, 192], 'âš”ï¸': [192, 192, 192], 'ğŸ›¡ï¸': [192, 192, 192],
            'ğŸš¬': [255, 255, 255], 'âš°ï¸': [139, 69, 19], 'âš±ï¸': [139, 69, 19], 'ğŸº': [139, 69, 19],
            'ğŸ”®': [128, 0, 128], 'ğŸ“¿': [139, 69, 19], 'ğŸ§¿': [0, 0, 255], 'ğŸ’ˆ': [255, 0, 0],
            'âš—ï¸': [255, 255, 255], 'ğŸ”­': [0, 0, 139], 'ğŸ”¬': [255, 255, 255], 'ğŸ•³ï¸': [0, 0, 0],
            'ğŸ’Š': [255, 255, 255], 'ğŸ’‰': [255, 255, 255], 'ğŸ§¬': [0, 255, 0], 'ğŸ¦ ': [0, 255, 0],
            'ğŸ§«': [255, 255, 255], 'ğŸ§ª': [255, 255, 255], 'ğŸŒ¡ï¸': [255, 255, 255], 'ğŸ§¹': [139, 69, 19],
            'ğŸ§º': [139, 69, 19], 'ğŸ§»': [255, 255, 255], 'ğŸš½': [255, 255, 255], 'ğŸš¿': [255, 255, 255],
            'ğŸ›': [255, 255, 255], 'ğŸ›€': [255, 220, 177], 'ğŸ§´': [255, 255, 255], 'ğŸ§·': [192, 192, 192],
            'ğŸ§¸': [139, 69, 19], 'ğŸ§µ': [255, 255, 255], 'ğŸ§¶': [255, 0, 0], 'ğŸ¥½': [255, 255, 255],
            'ğŸ¥¼': [255, 255, 255], 'ğŸ¥¾': [139, 69, 19], 'ğŸ§¦': [255, 255, 255], 'ğŸ§¤': [255, 255, 255],
            'ğŸ§£': [255, 0, 0], 'ğŸ©': [0, 0, 0], 'ğŸ§¢': [255, 0, 0], 'ğŸ‘’': [255, 215, 0],
            'ğŸ“': [0, 0, 0], 'ğŸ‘‘': [255, 215, 0], 'ğŸ‘': [255, 192, 203], 'ğŸ‘›': [255, 192, 203],
            'ğŸ‘œ': [139, 69, 19], 'ğŸ’¼': [139, 69, 19], 'ğŸ’': [255, 0, 0], 'ğŸ‘': [0, 0, 0],
            'ğŸ‘Ÿ': [255, 255, 255], 'ğŸ¥¿': [255, 228, 181], 'ğŸ©´': [255, 165, 0], 'ğŸ‘ ': [255, 0, 0],
            'ğŸ‘¡': [255, 192, 203], 'ğŸ‘¢': [139, 69, 19], 'ğŸ‘•': [255, 255, 255], 'ğŸ‘”': [255, 255, 255],
            'ğŸ‘—': [255, 192, 203], 'ğŸ‘˜': [255, 0, 0], 'ğŸ‘™': [255, 192, 203], 'ğŸ‘š': [255, 192, 203],
            'ğŸ‘–': [0, 0, 139], 'ğŸ©±': [255, 0, 0], 'ğŸ©²': [255, 255, 255], 'ğŸ©³': [255, 255, 255],
            'ğŸ‘´': [255, 228, 181], 'ğŸ‘µ': [255, 228, 181], 'ğŸ‘¶': [255, 228, 181], 'ğŸ‘§': [255, 228, 181],
            'ğŸ‘¦': [255, 228, 181], 'ğŸ‘©': [255, 228, 181], 'ğŸ‘¨': [255, 228, 181], 'ğŸ‘±': [255, 228, 181],
            'ğŸ‘²': [255, 228, 181], 'ğŸ‘³': [255, 228, 181], 'ğŸ‘®': [255, 228, 181], 'ğŸ‘·': [255, 228, 181],
            'ğŸ’‚': [255, 228, 181], 'ğŸ•µï¸': [255, 228, 181], 'ğŸ‘©â€âš•ï¸': [255, 228, 181], 'ğŸ‘¨â€âš•ï¸': [255, 228, 181],
            'ğŸ‘©â€ğŸŒ¾': [255, 228, 181], 'ğŸ‘¨â€ğŸŒ¾': [255, 228, 181], 'ğŸ‘©â€ğŸ³': [255, 228, 181], 'ğŸ‘¨â€ğŸ³': [255, 228, 181],
            'ğŸ‘©â€ğŸ“': [255, 228, 181], 'ğŸ‘¨â€ğŸ“': [255, 228, 181], 'ğŸ‘©â€ğŸ¤': [255, 228, 181], 'ğŸ‘¨â€ğŸ¤': [255, 228, 181],
            'ğŸ‘©â€ğŸ«': [255, 228, 181], 'ğŸ‘¨â€ğŸ«': [255, 228, 181], 'ğŸ‘©â€ğŸ­': [255, 228, 181], 'ğŸ‘¨â€ğŸ­': [255, 228, 181],
            'ğŸ‘©â€ğŸ’»': [255, 228, 181], 'ğŸ‘¨â€ğŸ’»': [255, 228, 181], 'ğŸ‘©â€ğŸ’¼': [255, 228, 181], 'ğŸ‘¨â€ğŸ’¼': [255, 228, 181],
            'ğŸ‘©â€ğŸ”§': [255, 228, 181], 'ğŸ‘¨â€ğŸ”§': [255, 228, 181], 'ğŸ‘©â€ğŸ”¬': [255, 228, 181], 'ğŸ‘¨â€ğŸ”¬': [255, 228, 181],
            'ğŸ‘©â€ğŸ¨': [255, 228, 181], 'ğŸ‘¨â€ğŸ¨': [255, 228, 181], 'ğŸ‘©â€ğŸš’': [255, 228, 181], 'ğŸ‘¨â€ğŸš’': [255, 228, 181],
            'ğŸ‘©â€âœˆï¸': [255, 228, 181], 'ğŸ‘¨â€âœˆï¸': [255, 228, 181], 'ğŸ‘©â€ğŸš€': [255, 228, 181], 'ğŸ‘¨â€ğŸš€': [255, 228, 181],
            'ğŸ‘©â€âš–ï¸': [255, 228, 181], 'ğŸ‘¨â€âš–ï¸': [255, 228, 181], 'ğŸ‘°': [255, 228, 181], 'ğŸ¤µ': [255, 228, 181],
            'ğŸ‘¸': [255, 228, 181], 'ğŸ¤´': [255, 228, 181], 'ğŸ¤¶': [255, 228, 181], 'ğŸ…': [255, 228, 181],
            'ğŸ§™': [255, 228, 181], 'ğŸ§š': [255, 228, 181], 'ğŸ§›': [255, 228, 181], 'ğŸ§œ': [255, 228, 181],
            'ğŸ§': [255, 228, 181], 'ğŸ§': [255, 228, 181], 'ğŸ§Ÿ': [255, 228, 181], 'ğŸ’†': [255, 228, 181],
            'ğŸ’‡': [255, 228, 181], 'ğŸš¶': [255, 228, 181], 'ğŸ§': [255, 228, 181], 'ğŸ§': [255, 228, 181],
            'ğŸƒ': [255, 228, 181], 'ğŸ’ƒ': [255, 228, 181], 'ğŸ•º': [255, 228, 181], 'ğŸ•´ï¸': [255, 228, 181],
            'ğŸ‘¯': [255, 228, 181], 'ğŸ§–': [255, 228, 181], 'ğŸ§—': [255, 228, 181], 'ğŸ¤º': [255, 228, 181],
            'ğŸ‡': [255, 228, 181], 'â›·ï¸': [255, 228, 181], 'ğŸ‚': [255, 228, 181], 'ğŸŒï¸': [255, 228, 181],
            'ğŸ„': [255, 228, 181], 'ğŸš£': [255, 228, 181], 'ğŸŠ': [255, 228, 181], 'â›¹ï¸': [255, 228, 181],
            'ğŸ‹ï¸': [255, 228, 181], 'ğŸš´': [255, 228, 181], 'ğŸšµ': [255, 228, 181], 'ğŸ¤¸': [255, 228, 181],
            'ğŸ¤¼': [255, 228, 181], 'ğŸ¤½': [255, 228, 181], 'ğŸ¤¾': [255, 228, 181], 'ğŸ¤¹': [255, 228, 181],
            'ğŸ§˜': [255, 228, 181], 'ğŸ›€': [255, 228, 181], 'ğŸ›Œ': [255, 228, 181], 'ğŸ•¯ï¸': [255, 255, 0],
            'ğŸ””': [255, 215, 0], 'ğŸ”•': [255, 215, 0], 'ğŸµ': [0, 0, 0], 'ğŸ¶': [0, 0, 0],
            'ğŸ¼': [255, 255, 255], 'ğŸ¹': [255, 255, 255], 'ğŸ¥': [139, 69, 19], 'ğŸ·': [255, 215, 0],
            'ğŸº': [255, 215, 0], 'ğŸ¸': [139, 69, 19], 'ğŸ»': [139, 69, 19], 'ğŸ¤': [0, 0, 0],
            'ğŸ§': [0, 0, 0], 'ğŸ“»': [0, 0, 0], 'ğŸ¬': [0, 0, 0], 'ğŸ­': [255, 255, 255],
            'ğŸ¨': [255, 255, 255], 'ğŸª': [255, 255, 255], 'ğŸ°': [255, 215, 0], 'ğŸ²': [255, 255, 255],
            'ğŸ¯': [255, 0, 0], 'ğŸ±': [0, 0, 0], 'ğŸ³': [255, 255, 255], 'ğŸ®': [128, 0, 128],
            'ğŸ¯': [255, 0, 0], 'ğŸ›·': [139, 69, 19], 'ğŸ¥Œ': [169, 169, 169], 'ğŸ£': [139, 69, 19],
            'ğŸ½': [255, 255, 255], 'ğŸ¥Š': [255, 0, 0], 'ğŸ¥‹': [255, 255, 255], 'ğŸ–ï¸': [255, 215, 0],
            'ğŸ†': [255, 215, 0], 'ğŸ…': [255, 215, 0], 'ğŸ¥‡': [255, 215, 0], 'ğŸ¥ˆ': [192, 192, 192],
            'ğŸ¥‰': [205, 127, 50], 'âš½': [255, 255, 255], 'âš¾': [255, 255, 255], 'ğŸ¥': [255, 255, 0],
            'ğŸ€': [255, 140, 0], 'ğŸ': [255, 255, 255], 'ğŸˆ': [139, 69, 19], 'ğŸ‰': [139, 69, 19],
            'ğŸ¾': [255, 255, 0], 'ğŸ¥': [255, 255, 255], 'ğŸ³': [255, 255, 255], 'ğŸ“': [255, 140, 0],
            'ğŸ¸': [255, 255, 255], 'ğŸ¥': [139, 69, 19], 'ğŸ‘': [255, 255, 255], 'ğŸ’': [139, 69, 19],
            'ğŸ¥…': [255, 255, 255], 'â›³': [255, 255, 255], 'ğŸ¹': [139, 69, 19], 'ğŸ£': [139, 69, 19],
            'ğŸ¤¿': [255, 255, 255], 'ğŸ¥½': [255, 255, 255], 'ğŸ¿': [255, 255, 255], 'ğŸ›·': [139, 69, 19],
            'ğŸ¥Œ': [169, 169, 169], 'ğŸ¯': [255, 0, 0], 'ğŸ±': [0, 0, 0], 'ğŸ”®': [128, 0, 128],
            'ğŸ°': [255, 215, 0], 'ğŸ²': [255, 255, 255], 'ğŸ§©': [255, 255, 255], 'ğŸƒ': [255, 255, 255],
            'ğŸ€„': [255, 255, 255], 'ğŸ´': [255, 255, 255], 'ğŸ­': [255, 255, 255], 'ğŸ–¼ï¸': [139, 69, 19],
            'ğŸ¨': [255, 255, 255], 'ğŸ§µ': [255, 255, 255], 'ğŸ§¶': [255, 0, 0], 'ğŸ¼': [255, 255, 255],
            'ğŸµ': [0, 0, 0], 'ğŸ¶': [0, 0, 0], 'ğŸ™ï¸': [0, 0, 0], 'ğŸšï¸': [0, 0, 0],
            'ğŸ›ï¸': [0, 0, 0], 'ğŸ¤': [0, 0, 0], 'ğŸ§': [0, 0, 0], 'ğŸ“»': [0, 0, 0],
            'ğŸ“±': [0, 0, 0], 'ğŸ“²': [0, 0, 0], 'â˜ï¸': [255, 0, 0], 'ğŸ“': [0, 0, 0],
            'ğŸ“Ÿ': [0, 0, 0], 'ğŸ“ ': [255, 255, 255], 'ğŸ”‹': [0, 255, 0], 'ğŸ”Œ': [255, 255, 255],
            'ğŸ’»': [192, 192, 192], 'ğŸ–¥ï¸': [192, 192, 192], 'ğŸ–¨ï¸': [255, 255, 255], 'âŒ¨ï¸': [255, 255, 255],
            'ğŸ–±ï¸': [255, 255, 255], 'ğŸ–²ï¸': [255, 255, 255], 'ğŸ’½': [255, 255, 255], 'ğŸ’¾': [0, 0, 0],
            'ğŸ’¿': [192, 192, 192], 'ğŸ“€': [255, 255, 255], 'ğŸ§®': [139, 69, 19], 'ğŸ¥': [0, 0, 0],
            'ğŸï¸': [0, 0, 0], 'ğŸ“½ï¸': [0, 0, 0], 'ğŸ¬': [0, 0, 0], 'ğŸ“º': [0, 0, 0],
            'ğŸ“·': [0, 0, 0], 'ğŸ“¸': [0, 0, 0], 'ğŸ“¹': [0, 0, 0], 'ğŸ“¼': [0, 0, 0],
            'ğŸ”': [255, 255, 255], 'ğŸ”': [255, 255, 255], 'ğŸ•¯ï¸': [255, 255, 0], 'ğŸ’¡': [255, 255, 0],
            'ğŸ”¦': [255, 255, 255], 'ğŸ®': [255, 0, 0], 'ğŸª”': [255, 165, 0], 'ğŸ“”': [0, 255, 0],
            'ğŸ“•': [255, 0, 0], 'ğŸ“–': [255, 255, 255], 'ğŸ“—': [0, 255, 0], 'ğŸ“˜': [0, 0, 255],
            'ğŸ“™': [255, 165, 0], 'ğŸ“š': [255, 255, 255], 'ğŸ““': [255, 255, 255], 'ğŸ“’': [255, 255, 255],
            'ğŸ“ƒ': [255, 255, 255], 'ğŸ“œ': [255, 228, 181], 'ğŸ“„': [255, 255, 255], 'ğŸ“°': [255, 255, 255],
            'ğŸ—ï¸': [255, 255, 255], 'ğŸ“‘': [255, 255, 255], 'ğŸ”–': [255, 255, 0], 'ğŸ·ï¸': [255, 255, 255],
            'ğŸ’°': [255, 215, 0], 'ğŸ’´': [255, 255, 0], 'ğŸ’µ': [0, 255, 0], 'ğŸ’¶': [255, 165, 0],
            'ğŸ’·': [128, 0, 128], 'ğŸ’¸': [0, 255, 0], 'ğŸ’³': [255, 255, 255], 'ğŸ§¾': [255, 255, 255],
            'ğŸ’¹': [0, 255, 0], 'ğŸ’±': [255, 255, 255], 'ğŸ’²': [0, 255, 0], 'âœ‰ï¸': [255, 255, 255],
            'ğŸ“§': [255, 255, 255], 'ğŸ“¨': [255, 255, 255], 'ğŸ“©': [255, 255, 255], 'ğŸ“¤': [255, 255, 255],
            'ğŸ“¥': [255, 255, 255], 'ğŸ“¦': [139, 69, 19], 'ğŸ“«': [0, 0, 255], 'ğŸ“ª': [0, 0, 255],
            'ğŸ“¬': [0, 0, 255], 'ğŸ“­': [0, 0, 255], 'ğŸ“®': [255, 0, 0], 'ğŸ—³ï¸': [255, 255, 255],
            'âœï¸': [255, 215, 0], 'âœ’ï¸': [0, 0, 0], 'ğŸ–‹ï¸': [0, 0, 0], 'ğŸ–Šï¸': [0, 0, 0],
            'ğŸ–Œï¸': [139, 69, 19], 'ğŸ–ï¸': [255, 0, 0], 'ğŸ“': [255, 255, 255], 'ğŸ’¼': [139, 69, 19],
            'ğŸ“': [255, 255, 0], 'ğŸ“‚': [255, 255, 0], 'ğŸ—‚ï¸': [255, 255, 0], 'ğŸ“…': [255, 255, 255],
            'ğŸ“†': [255, 255, 255], 'ğŸ—’ï¸': [255, 255, 255], 'ğŸ—“ï¸': [255, 255, 255], 'ğŸ“‡': [255, 255, 255],
            'ğŸ“ˆ': [255, 255, 255], 'ğŸ“‰': [255, 255, 255], 'ğŸ“Š': [255, 255, 255], 'ğŸ“‹': [139, 69, 19],
            'ğŸ“Œ': [255, 0, 0], 'ğŸ“': [255, 0, 0], 'ğŸ“': [192, 192, 192], 'ğŸ–‡ï¸': [192, 192, 192],
            'ğŸ“': [255, 255, 0], 'ğŸ“': [255, 255, 0], 'âœ‚ï¸': [192, 192, 192], 'ğŸ—ƒï¸': [139, 69, 19],
            'ğŸ—„ï¸': [192, 192, 192], 'ğŸ—‘ï¸': [192, 192, 192], 'ğŸ”’': [255, 215, 0], 'ğŸ”“': [255, 215, 0],
            'ğŸ”': [255, 215, 0], 'ğŸ”': [255, 215, 0], 'ğŸ”‘': [255, 215, 0], 'ğŸ—ï¸': [255, 215, 0],
            'ğŸ”¨': [139, 69, 19], 'ğŸª“': [139, 69, 19], 'â›ï¸': [139, 69, 19], 'âš’ï¸': [192, 192, 192],
            'ğŸ› ï¸': [192, 192, 192], 'ğŸ—¡ï¸': [192, 192, 192], 'âš”ï¸': [192, 192, 192], 'ğŸ”«': [0, 0, 0],
            'ğŸ¹': [139, 69, 19], 'ğŸ›¡ï¸': [192, 192, 192], 'ğŸ”§': [192, 192, 192], 'ğŸ”©': [192, 192, 192],
            'âš™ï¸': [192, 192, 192], 'ğŸ—œï¸': [192, 192, 192], 'âš–ï¸': [255, 215, 0], 'ğŸ¦¯': [255, 255, 255],
            'ğŸ”—': [192, 192, 192], 'â›“ï¸': [192, 192, 192], 'ğŸ§°': [255, 0, 0], 'ğŸ§²': [255, 0, 0],
            'âš—ï¸': [255, 255, 255], 'ğŸ§ª': [255, 255, 255], 'ğŸ§«': [255, 255, 255], 'ğŸ§¬': [0, 255, 0],
            'ğŸ”¬': [255, 255, 255], 'ğŸ”­': [0, 0, 139], 'ğŸ“¡': [192, 192, 192], 'ğŸ’‰': [255, 255, 255],
            'ğŸ©¸': [255, 0, 0], 'ğŸ’Š': [255, 255, 255], 'ğŸ©¹': [255, 228, 196], 'ğŸ©º': [0, 0, 0],
            'ğŸšª': [139, 69, 19], 'ğŸ›ï¸': [255, 255, 255], 'ğŸ›‹ï¸': [139, 69, 19], 'ğŸš½': [255, 255, 255],
            'ğŸš¿': [255, 255, 255], 'ğŸ›': [255, 255, 255], 'ğŸ§´': [255, 255, 255], 'ğŸ§·': [192, 192, 192],
            'ğŸ§¹': [139, 69, 19], 'ğŸ§º': [139, 69, 19], 'ğŸ§»': [255, 255, 255], 'ğŸ§¼': [255, 255, 255],
            'ğŸ§½': [255, 255, 0], 'ğŸ§¯': [255, 0, 0], 'ğŸ›’': [255, 0, 0], 'ğŸš¬': [255, 255, 255],
            'âš°ï¸': [139, 69, 19], 'âš±ï¸': [139, 69, 19], 'ğŸ—¿': [169, 169, 169], 'ğŸš°': [255, 255, 255],
            'ğŸš±': [255, 255, 255], 'ğŸš­': [255, 255, 255], 'ğŸš¯': [255, 255, 255], 'ğŸš³': [255, 255, 255],
            'ğŸš·': [255, 255, 255], 'ğŸš¸': [255, 255, 0], 'â›”': [255, 0, 0], 'ğŸš«': [255, 0, 0],
            'ğŸš³': [255, 255, 255], 'ğŸš­': [255, 255, 255], 'ğŸš¯': [255, 255, 255], 'ğŸš±': [255, 255, 255],
            'ğŸš·': [255, 255, 255], 'ğŸ“µ': [255, 255, 255], 'ğŸ”': [255, 255, 255], 'â˜¢ï¸': [255, 255, 0],
            'â˜£ï¸': [255, 255, 0], 'â¬†ï¸': [0, 0, 255], 'â†—ï¸': [0, 0, 255], 'â¡ï¸': [0, 0, 255],
            'â†˜ï¸': [0, 0, 255], 'â¬‡ï¸': [0, 0, 255], 'â†™ï¸': [0, 0, 255], 'â¬…ï¸': [0, 0, 255],
            'â†–ï¸': [0, 0, 255], 'â†•ï¸': [0, 0, 255], 'â†”ï¸': [0, 0, 255], 'â†©ï¸': [0, 0, 255],
            'â†ªï¸': [0, 0, 255], 'â¤´ï¸': [0, 0, 255], 'â¤µï¸': [0, 0, 255], 'ğŸ”ƒ': [0, 0, 255],
            'ğŸ”„': [0, 0, 255], 'ğŸ”™': [0, 0, 255], 'ğŸ”š': [0, 0, 255], 'ğŸ”›': [0, 0, 255],
            'ğŸ”œ': [0, 0, 255], 'ğŸ”': [0, 0, 255], 'ğŸ›': [255, 255, 255], 'âš›ï¸': [255, 255, 255],
            'ğŸ•‰ï¸': [255, 255, 255], 'âœ¡ï¸': [255, 255, 255], 'â˜¸ï¸': [255, 255, 255], 'â˜¯ï¸': [255, 255, 255],
            'âœï¸': [255, 255, 255], 'â˜¦ï¸': [255, 255, 255], 'â˜ªï¸': [255, 255, 255], 'â˜®ï¸': [255, 255, 255],
            'ğŸ•': [255, 255, 255], 'ğŸ”¯': [255, 255, 255], 'â™ˆ': [255, 255, 255], 'â™‰': [255, 255, 255],
            'â™Š': [255, 255, 255], 'â™‹': [255, 255, 255], 'â™Œ': [255, 255, 255], 'â™': [255, 255, 255],
            'â™': [255, 255, 255], 'â™': [255, 255, 255], 'â™': [255, 255, 255], 'â™‘': [255, 255, 255],
            'â™’': [255, 255, 255], 'â™“': [255, 255, 255], 'â›': [255, 255, 255], 'ğŸ”€': [0, 0, 255],
            'ğŸ”': [0, 0, 255], 'ğŸ”‚': [0, 0, 255], 'â–¶ï¸': [0, 0, 255], 'â©': [0, 0, 255],
            'â­ï¸': [0, 0, 255], 'â¯ï¸': [0, 0, 255], 'â—€ï¸': [0, 0, 255], 'âª': [0, 0, 255],
            'â®ï¸': [0, 0, 255], 'ğŸ”¼': [0, 0, 255], 'â«': [0, 0, 255], 'ğŸ”½': [0, 0, 255],
            'â¬': [0, 0, 255], 'â¸ï¸': [0, 0, 255], 'â¹ï¸': [0, 0, 255], 'âºï¸': [255, 0, 0],
            'âï¸': [0, 0, 255], 'ğŸ¦': [0, 0, 255], 'ğŸ”…': [255, 255, 200], 'ğŸ”†': [255, 255, 0],
            'ğŸ“¶': [0, 255, 0], 'ğŸ“³': [255, 255, 255], 'ğŸ“´': [255, 255, 255], 'â™€ï¸': [255, 255, 255],
            'â™‚ï¸': [255, 255, 255], 'âš§ï¸': [255, 255, 255], 'âœ–ï¸': [255, 0, 0], 'â•': [0, 255, 0],
            'â–': [255, 0, 0], 'â—': [255, 255, 255], 'â™¾ï¸': [255, 255, 255], 'â€¼ï¸': [255, 0, 0],
            'â‰ï¸': [255, 0, 0], 'â“': [255, 255, 255], 'â”': [255, 255, 255], 'â•': [255, 255, 255],
            'â—': [255, 0, 0], 'ã€°ï¸': [255, 255, 255], 'ğŸ’±': [255, 255, 255], 'ğŸ’²': [0, 255, 0],
            'âš•ï¸': [255, 255, 255], 'â™»ï¸': [0, 255, 0], 'âšœï¸': [255, 255, 255], 'ğŸ”±': [255, 255, 255],
            'ğŸ“›': [255, 0, 0], 'ğŸ”°': [255, 255, 0], 'â­•': [255, 0, 0], 'âœ…': [0, 255, 0],
            'â˜‘ï¸': [0, 255, 0], 'âœ”ï¸': [0, 255, 0], 'âŒ': [255, 0, 0], 'â': [255, 0, 0],
            'â°': [255, 255, 255], 'â¿': [255, 255, 255], 'ã€½ï¸': [255, 255, 255], 'âœ³ï¸': [255, 255, 255],
            'âœ´ï¸': [255, 255, 255], 'â‡ï¸': [255, 255, 255], 'Â©ï¸': [255, 255, 255], 'Â®ï¸': [255, 255, 255],
            'â„¢ï¸': [255, 255, 255], '#ï¸âƒ£': [255, 255, 255], '*ï¸âƒ£': [255, 255, 255], '0ï¸âƒ£': [255, 255, 255],
            '1ï¸âƒ£': [255, 255, 255], '2ï¸âƒ£': [255, 255, 255], '3ï¸âƒ£': [255, 255, 255], '4ï¸âƒ£': [255, 255, 255],
            '5ï¸âƒ£': [255, 255, 255], '6ï¸âƒ£': [255, 255, 255], '7ï¸âƒ£': [255, 255, 255], '8ï¸âƒ£': [255, 255, 255],
            '9ï¸âƒ£': [255, 255, 255], 'ğŸ”Ÿ': [255, 255, 255], 'ğŸ” ': [255, 255, 255], 'ğŸ”¡': [255, 255, 255],
            'ğŸ”¢': [255, 255, 255], 'ğŸ”£': [255, 255, 255], 'ğŸ”¤': [255, 255, 255], 'ğŸ…°ï¸': [255, 0, 0],
            'ğŸ†': [255, 0, 0], 'ğŸ…±ï¸': [255, 0, 0], 'ğŸ†‘': [255, 0, 0], 'ğŸ†’': [0, 0, 255],
            'ğŸ†“': [0, 255, 0], 'â„¹ï¸': [0, 0, 255], 'ğŸ†”': [255, 255, 255], 'â“‚ï¸': [255, 0, 0],
            'ğŸ†•': [255, 255, 0], 'ğŸ†–': [255, 255, 0], 'ğŸ…¾ï¸': [255, 0, 0], 'ğŸ†—': [0, 0, 255],
            'ğŸ…¿ï¸': [0, 0, 255], 'ğŸ†˜': [255, 0, 0], 'ğŸ†™': [0, 0, 255], 'ğŸ†š': [255, 255, 255],
            'ğŸˆ': [255, 255, 255], 'ğŸˆ‚ï¸': [255, 255, 255], 'ğŸˆ·ï¸': [255, 255, 255], 'ğŸˆ¶': [255, 255, 255],
            'ğŸˆ¯': [255, 255, 255], 'ğŸ‰': [255, 255, 255], 'ğŸˆ¹': [255, 255, 255], 'ğŸˆš': [255, 255, 255],
            'ğŸˆ²': [255, 255, 255], 'ğŸ‰‘': [255, 255, 255], 'ğŸˆ¸': [255, 255, 255], 'ğŸˆ´': [255, 255, 255],
            'ğŸˆ³': [255, 255, 255], 'ãŠ—ï¸': [255, 255, 255], 'ãŠ™ï¸': [255, 255, 255], 'ğŸˆº': [255, 255, 255],
            'ğŸˆµ': [255, 255, 255], 'ğŸ”´': [255, 0, 0], 'ğŸŸ ': [255, 165, 0], 'ğŸŸ¡': [255, 255, 0],
            'ğŸŸ¢': [0, 255, 0], 'ğŸ”µ': [0, 0, 255], 'ğŸŸ£': [128, 0, 128], 'ğŸŸ¤': [139, 69, 19],
            'âš«': [0, 0, 0], 'âšª': [255, 255, 255], 'ğŸŸ¥': [255, 0, 0], 'ğŸŸ§': [255, 165, 0],
            'ğŸŸ¨': [255, 255, 0], 'ğŸŸ©': [0, 255, 0], 'ğŸŸ¦': [0, 0, 255], 'ğŸŸª': [128, 0, 128],
            'ğŸŸ«': [139, 69, 19], 'â¬›': [0, 0, 0], 'â¬œ': [255, 255, 255], 'â—¼ï¸': [0, 0, 0],
            'â—»ï¸': [255, 255, 255], 'â—¾': [0, 0, 0], 'â—½': [255, 255, 255], 'â–ªï¸': [0, 0, 0],
            'â–«ï¸': [255, 255, 255], 'ğŸ”¶': [255, 165, 0], 'ğŸ”·': [0, 0, 255], 'ğŸ”¸': [255, 165, 0],
            'ğŸ”¹': [0, 0, 255], 'ğŸ”º': [255, 0, 0], 'ğŸ”»': [255, 0, 0], 'ğŸ’ ': [0, 191, 255],
            'ğŸ”˜': [0, 0, 0], 'ğŸ”³': [255, 255, 255], 'ğŸ”²': [0, 0, 0], 'ğŸ': [255, 255, 255],
            'ğŸš©': [255, 0, 0], 'ğŸŒ': [255, 255, 255], 'ğŸ´': [0, 0, 0], 'ğŸ³ï¸': [255, 255, 255],
            'ğŸ³ï¸â€ğŸŒˆ': [255, 100, 100], 'ğŸ³ï¸â€âš§ï¸': [255, 255, 255], 'ğŸ´â€â˜ ï¸': [0, 0, 0]
        };

        // Advanced color calculation utilities
        function rgbToLab(r, g, b) {
            // Convert RGB to LAB color space for better color matching
            let x, y, z;
            
            r = r / 255;
            g = g / 255;
            b = b / 255;

            if (r > 0.04045) {
                r = Math.pow((r + 0.055) / 1.055, 2.4);
            } else {
                r = r / 12.92;
            }

            if (g > 0.04045) {
                g = Math.pow((g + 0.055) / 1.055, 2.4);
            } else {
                g = g / 12.92;
            }

            if (b > 0.04045) {
                b = Math.pow((b + 0.055) / 1.055, 2.4);
            } else {
                b = b / 12.92;
            }

            x = (r * 0.4124 + g * 0.3576 + b * 0.1805) / 0.95047;
            y = (r * 0.2126 + g * 0.7152 + b * 0.0722) / 1.00000;
            z = (r * 0.0193 + g * 0.1192 + b * 0.9505) / 1.08883;

            if (x > 0.008856) {
                x = Math.pow(x, 1/3);
            } else {
                x = (7.787 * x) + (16/116);
            }

            if (y > 0.008856) {
                y = Math.pow(y, 1/3);
            } else {
                y = (7.787 * y) + (16/116);
            }

            if (z > 0.008856) {
                z = Math.pow(z, 1/3);
            } else {
                z = (7.787 * z) + (16/116);
            }

            return [
                (116 * y) - 16,
                500 * (x - y),
                200 * (y - z)
            ];
        }

        function deltaE(lab1, lab2) {
            // Calculate color difference in LAB space
            const dL = lab1[0] - lab2[0];
            const da = lab1[1] - lab2[1];
            const db = lab1[2] - lab2[2];
            return Math.sqrt(dL * dL + da * da + db * db);
        }

        function getClosestEmoji(r, g, b, sensitivity = 80) {
            const targetLab = rgbToLab(r, g, b);
            let minDistance = Infinity;
            let bestEmoji = 'â¬œ';

            for (const [emoji, color] of Object.entries(EMOJI_PALETTE)) {
                const emojiLab = rgbToLab(color[0], color[1], color[2]);
                const distance = deltaE(targetLab, emojiLab);
                
                if (distance < minDistance) {
                    minDistance = distance;
                    bestEmoji = emoji;
                }
            }

            // If sensitivity is high, allow more color variations
            if (sensitivity > 90) {
                const secondBestOptions = [];
                for (const [emoji, color] of Object.entries(EMOJI_PALETTE)) {
                    const emojiLab = rgbToLab(color[0], color[1], color[2]);
                    const distance = deltaE(targetLab, emojiLab);
                    
                    if (distance < minDistance * 1.2) {
                        secondBestOptions.push(emoji);
                    }
                }
                
                if (secondBestOptions.length > 0) {
                    return secondBestOptions[Math.floor(Math.random() * secondBestOptions.length)];
                }
            }

            return bestEmoji;
        }

        function applyDithering(imageData, width, height) {
            // Floyd-Steinberg dithering
            const data = imageData.data;
            
            for (let y = 0; y < height - 1; y++) {
                for (let x = 1; x < width - 1; x++) {
                    const idx = (y * width + x) * 4;
                    
                    const oldR = data[idx];
                    const oldG = data[idx + 1];
                    const oldB = data[idx + 2];
                    
                    // Get closest emoji color
                    const bestEmoji = getClosestEmoji(oldR, oldG, oldB);
                    const newColor = EMOJI_PALETTE[bestEmoji];
                    
                    data[idx] = newColor[0];
                    data[idx + 1] = newColor[1];
                    data[idx + 2] = newColor[2];
                    
                    const errR = oldR - newColor[0];
                    const errG = oldG - newColor[1];
                    const errB = oldB - newColor[2];
                    
                    // Distribute error to neighboring pixels
                    const neighbors = [
                        [x + 1, y, 7/16],
                        [x - 1, y + 1, 3/16],
                        [x, y + 1, 5/16],
                        [x + 1, y + 1, 1/16]
                    ];
                    
                    for (const [nx, ny, factor] of neighbors) {
                        if (nx >= 0 && nx < width && ny >= 0 && ny < height) {
                            const nIdx = (ny * width + nx) * 4;
                            data[nIdx] += errR * factor;
                            data[nIdx + 1] += errG * factor;
                            data[nIdx + 2] += errB * factor;
                        }
                    }
                }
            }
            
            return imageData;
        }

        // Global variables
        let originalImage = null;
        let processedResult = '';
        let currentSettings = {
            resolution: 50,
            colorSensitivity: 80,
            emojiSize: 16,
            contrast: 100,
            dithering: false,
            preserveAspect: true
        };

        // Initialize event listeners
        document.addEventListener('DOMContentLoaded', function() {
            initializeControls();
            setupDragDrop();
            setupSliders();
        });

        function initializeControls() {
            const imageInput = document.getElementById('imageInput');
            const processBtn = document.getElementById('processBtn');
            const downloadBtn = document.getElementById('downloadBtn');

            imageInput.addEventListener('change', handleImageUpload);
            processBtn.addEventListener('click', processImage);
            downloadBtn.addEventListener('click', downloadResult);
        }

        function setupDragDrop() {
            const dropArea = document.querySelector('.drag-drop-area');
            
            ['dragenter', 'dragover', 'dragleave', 'drop'].forEach(eventName => {
                dropArea.addEventListener(eventName, preventDefaults, false);
            });

            function preventDefaults(e) {
                e.preventDefault();
                e.stopPropagation();
            }

            ['dragenter', 'dragover'].forEach(eventName => {
                dropArea.addEventListener(eventName, highlight, false);
            });

            ['dragleave', 'drop'].forEach(eventName => {
                dropArea.addEventListener(eventName, unhighlight, false);
            });

            function highlight(e) {
                dropArea.classList.add('dragover');
            }

            function unhighlight(e) {
                dropArea.classList.remove('dragover');
            }

            dropArea.addEventListener('drop', handleDrop, false);

            function handleDrop(e) {
                const dt = e.dataTransfer;
                const files = dt.files;
                
                if (files.length > 0) {
                    handleImageFile(files[0]);
                }
            }
        }

        function setupSliders() {
            const sliders = [
                { id: 'resolutionSlider', valueId: 'resolutionValue', suffix: ' Ù¾ÛŒÚ©Ø³Ù„', property: 'resolution' },
                { id: 'colorSensitivitySlider', valueId: 'colorSensitivityValue', suffix: '%', property: 'colorSensitivity' },
                { id: 'emojiSizeSlider', valueId: 'emojiSizeValue', suffix: 'px', property: 'emojiSize' },
                { id: 'contrastSlider', valueId: 'contrastValue', suffix: '%', property: 'contrast' }
            ];

            sliders.forEach(slider => {
                const element = document.getElementById(slider.id);
                const valueElement = document.getElementById(slider.valueId);
                
                element.addEventListener('input', function() {
                    const value = parseInt(this.value);
                    valueElement.textContent = value + slider.suffix;
                    currentSettings[slider.property] = value;
                });
            });

            // Checkbox listeners
            document.getElementById('ditherCheck').addEventListener('change', function() {
                currentSettings.dithering = this.checked;
            });

            document.getElementById('preserveAspectCheck').addEventListener('change', function() {
                currentSettings.preserveAspect = this.checked;
            });
        }

        function handleImageUpload(event) {
            const file = event.target.files[0];
            if (file) {
                handleImageFile(file);
            }
        }

        function handleImageFile(file) {
            if (!file.type.startsWith('image/')) {
                alert('Ù„Ø·ÙØ§Ù‹ ÛŒÚ© ÙØ§ÛŒÙ„ Ø¹Ú©Ø³ Ø§Ù†ØªØ®Ø§Ø¨ Ú©Ù†ÛŒØ¯');
                return;
            }

            if (file.size > 10 * 1024 * 1024) {
                alert('Ø³Ø§ÛŒØ² ÙØ§ÛŒÙ„ Ø¨Ø§ÛŒØ¯ Ú©Ù…ØªØ± Ø§Ø² 10 Ù…Ú¯Ø§Ø¨Ø§ÛŒØª Ø¨Ø§Ø´Ø¯');
                return;
            }

            const reader = new FileReader();
            reader.onload = function(e) {
                const img = new Image();
                img.onload = function() {
                    originalImage = img;
                    displayOriginalImage(img);
                    updateStats();
                    document.getElementById('processBtn').disabled = false;
                };
                img.src = e.target.result;
            };
            reader.readAsDataURL(file);
        }

        function displayOriginalImage(img) {
            const preview = document.getElementById('originalPreview');
            const placeholder = document.getElementById('originalPlaceholder');
            
            preview.src = img.src;
            preview.classList.remove('hidden');
            placeholder.classList.add('hidden');
        }

        function updateStats() {
            if (!originalImage) return;

            document.getElementById('originalSize').textContent = `${originalImage.width}Ã—${originalImage.height}`;
            
            const outputSize = calculateOutputSize(originalImage.width, originalImage.height);
            document.getElementById('processedSize').textContent = `${outputSize.width}Ã—${outputSize.height}`;
            document.getElementById('emojiCount').textContent = (outputSize.width * outputSize.height).toLocaleString();
        }

        function calculateOutputSize(width, height) {
            const maxDimension = currentSettings.resolution;
            
            if (currentSettings.preserveAspect) {
                const aspectRatio = width / height;
                
                if (width > height) {
                    return {
                        width: maxDimension,
                        height: Math.round(maxDimension / aspectRatio)
                    };
                } else {
                    return {
                        width: Math.round(maxDimension * aspectRatio),
                        height: maxDimension
                    };
                }
            } else {
                return {
                    width: maxDimension,
                    height: maxDimension
                };
            }
        }

        async function processImage() {
            if (!originalImage) {
                alert('Ù„Ø·ÙØ§Ù‹ Ø§Ø¨ØªØ¯Ø§ ÛŒÚ© Ø¹Ú©Ø³ Ø¢Ù¾Ù„ÙˆØ¯ Ú©Ù†ÛŒØ¯');
                return;
            }

            const startTime = Date.now();
            const progressContainer = document.getElementById('progressContainer');
            const progressBar = document.getElementById('progressBar');
            const progressText = document.getElementById('progressText');
            const processBtn = document.getElementById('processBtn');

            // Show progress and disable button
            progressContainer.classList.remove('hidden');
            processBtn.disabled = true;
            processBtn.innerHTML = '<i class="fas fa-spinner fa-spin mr-2"></i>Ø¯Ø± Ø­Ø§Ù„ Ù¾Ø±Ø¯Ø§Ø²Ø´...';

            try {
                // Update progress
                updateProgress(10, 'Ø¢Ù…Ø§Ø¯Ù‡â€ŒØ³Ø§Ø²ÛŒ Ø¹Ú©Ø³...');

                // Create canvas for processing
                const canvas = document.createElement('canvas');
                const ctx = canvas.getContext('2d');
                
                const outputSize = calculateOutputSize(originalImage.width, originalImage.height);
                canvas.width = outputSize.width;
                canvas.height = outputSize.height;

                // Apply contrast adjustment
                ctx.filter = `contrast(${currentSettings.contrast}%)`;
                ctx.drawImage(originalImage, 0, 0, canvas.width, canvas.height);

                updateProgress(30, 'ØªØ¬Ø²ÛŒÙ‡ Ø±Ù†Ú¯â€ŒÙ‡Ø§...');

                // Get image data
                const imageData = ctx.getImageData(0, 0, canvas.width, canvas.height);
                
                // Apply dithering if enabled
                if (currentSettings.dithering) {
                    updateProgress(50, 'Ø§Ø¹Ù…Ø§Ù„ Dithering...');
                    await new Promise(resolve => setTimeout(resolve, 100));
                    applyDithering(imageData, canvas.width, canvas.height);
                }

                updateProgress(70, 'ØªØ¨Ø¯ÛŒÙ„ Ø¨Ù‡ Ø§ÛŒÙ…ÙˆØ¬ÛŒ...');

                // Convert to emoji art
                let result = '';
                const data = imageData.data;
                
                for (let y = 0; y < canvas.height; y++) {
                    for (let x = 0; x < canvas.width; x++) {
                        const idx = (y * canvas.width + x) * 4;
                        const r = data[idx];
                        const g = data[idx + 1];
                        const b = data[idx + 2];
                        
                        const emoji = getClosestEmoji(r, g, b, currentSettings.colorSensitivity);
                        result += emoji;
                    }
                    result += '\n';
                    
                    // Update progress
                    const progress = 70 + (y / canvas.height) * 20;
                    updateProgress(progress, 'ØªØ¨Ø¯ÛŒÙ„ Ø¨Ù‡ Ø§ÛŒÙ…ÙˆØ¬ÛŒ...');
                    
                    // Allow UI to update
                    if (y % 5 === 0) {
                        await new Promise(resolve => setTimeout(resolve, 1));
                    }
                }

                updateProgress(95, 'Ù†Ù‡Ø§ÛŒÛŒâ€ŒØ³Ø§Ø²ÛŒ...');

                // Display result
                const preview = document.getElementById('emojiPreview');
                preview.innerHTML = '';
                
                const emojiContainer = document.createElement('div');
                emojiContainer.className = 'emoji-output';
                emojiContainer.style.fontSize = `${currentSettings.emojiSize}px`;
                emojiContainer.textContent = result;
                
                preview.appendChild(emojiContainer);

                processedResult = result;
                
                // Update stats
                const processingTime = ((Date.now() - startTime) / 1000).toFixed(1);
                document.getElementById('processTime').textContent = processingTime + 's';
                
                // Enable download
                document.getElementById('downloadBtn').disabled = false;
                
                updateProgress(100, 'ØªÚ©Ù…ÛŒÙ„ Ø´Ø¯!');
                
                setTimeout(() => {
                    progressContainer.classList.add('hidden');
                    processBtn.disabled = false;
                    processBtn.innerHTML = '<i class="fas fa-magic mr-2"></i>Ø´Ø±ÙˆØ¹ ØªØ¨Ø¯ÛŒÙ„';
                }, 1000);

            } catch (error) {
                console.error('Ø®Ø·Ø§ Ø¯Ø± Ù¾Ø±Ø¯Ø§Ø²Ø´:', error);
                alert('Ø®Ø·Ø§ Ø¯Ø± Ù¾Ø±Ø¯Ø§Ø²Ø´ Ø¹Ú©Ø³. Ù„Ø·ÙØ§Ù‹ Ù…Ø¬Ø¯Ø¯Ø§Ù‹ ØªÙ„Ø§Ø´ Ú©Ù†ÛŒØ¯.');
                
                progressContainer.classList.add('hidden');
                processBtn.disabled = false;
                processBtn.innerHTML = '<i class="fas fa-magic mr-2"></i>Ø´Ø±ÙˆØ¹ ØªØ¨Ø¯ÛŒÙ„';
            }
        }

        function updateProgress(percentage, message) {
            const progressBar = document.getElementById('progressBar');
            const progressText = document.getElementById('progressText');
            
            progressBar.style.width = `${percentage}%`;
            progressText.textContent = `${Math.round(percentage)}%`;
            
            if (message) {
                progressText.textContent += ` - ${message}`;
            }
        }

        function downloadResult() {
            if (!processedResult) {
                alert('Ù‡ÛŒÚ† Ù†ØªÛŒØ¬Ù‡â€ŒØ§ÛŒ Ø¨Ø±Ø§ÛŒ Ø¯Ø§Ù†Ù„ÙˆØ¯ Ù…ÙˆØ¬ÙˆØ¯ Ù†ÛŒØ³Øª');
                return;
            }

            const blob = new Blob([processedResult], { type: 'text/plain;charset=utf-8' });
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = `emoji-art-${Date.now()}.txt`;
            document.body.appendChild(a);
            a.click();
            document.body.removeChild(a);
            URL.revokeObjectURL(url);
        }

        // Update stats when settings change
        document.getElementById('resolutionSlider').addEventListener('input', updateStats);
        document.getElementById('preserveAspectCheck').addEventListener('change', updateStats);
    </script>
</body>
</html>
